"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[846],{20005:function(t,n,e){function ConditionalWrapper(t){var n=t.condition,e=t.wrapper,r=t.falseWrapper,i=t.children;return n?e(i):r?r(i):i}e.d(n,{Z:function(){return ConditionalWrapper}})},59215:function(t,n,e){e.d(n,{Z:function(){return SortByButton}});var r=e(1413),i=e(45987),c=e(53174),s=e(54483),o=e(64554),a=e(2199),l=e(23786),u=e(24518),d=e(22020),f=e(76899),x=e(33890),h=e(80184),j=["sortKeys","value","onChange","ascending","onChangeAsc"];function SortByButton(t){var n=t.sortKeys,e=t.value,Z=t.onChange,m=t.ascending,p=t.onChangeAsc,y=(0,i.Z)(t,j),g=(0,d.$)("ui").t;return(0,h.jsxs)(o.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,h.jsx)(f.c,{t:g,i18nKey:g("sortBy"),children:"Sort by: "}),(0,h.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},y),{},{children:[(0,h.jsx)(x.Z,{title:(0,h.jsx)(f.c,{t:g,i18nKey:g("sortMap.".concat(e)),children:{value:g("sortMap.".concat(e))}}),children:n.map((function(t){return(0,h.jsx)(l.Z,{selected:e===t,disabled:e===t,onClick:function onClick(){return Z(t)},children:g("sortMap.".concat(t))},t)}))}),(0,h.jsx)(u.Z,{onClick:function onClick(){return p(!m)},startIcon:(0,h.jsx)(s.G,{icon:m?c.Pa6:c.xrW,className:"fa-fw"}),children:m?(0,h.jsx)(f.c,{t:g,i18nKey:"ascending",children:"Ascending"}):(0,h.jsx)(f.c,{t:g,i18nKey:"descending",children:"Descending"})})]}))]})}},10157:function(t,n,e){e.d(n,{q:function(){return l}});var r=e(93433),i=e(53174),c=e(54483),s=e(91702),o=e(80184),a=function StarIcon(){return(0,o.jsx)(c.G,{icon:i.Tab})},l=function StarsDisplay(t){var n=t.stars,e=t.colored,i=void 0!==e&&e;return(0,o.jsx)(s.Z,{color:i?"warning":void 0,children:n?(0,r.Z)(Array(n).keys()).map((function(t,n){return(0,o.jsx)(a,{},n)})):null})}},22945:function(t,n,e){e.r(n),e.d(n,{default:function(){return PageArtifact}});var r=e(93433),i=e(30168),c=e(1413),s=e(29439),o=e(49670),a=e(68087),l=e(64554),u=e(94070),d=e(23060),f=e(39504),x=e(61889),h=e(24518),j=e(57246),Z=e(47047),m=e(20890),p=e(72791),y=e(10757),g=e(22020),b=e(76899),v=e(43504),w=e(15678),A=e(3992),k=e(53174),P=e(54483),C=e(94721),I=e(24711),S=e(60393),F=e(68198),K=e(9321),D=e(66624),G=e(80184);function InfoComponent(t){var n=t.pageKey,e=t.text,r=void 0===e?"":e,i=t.modalTitle,c=void 0===i?"":i,o=t.children,a=(0,I.Z)("true"!==localStorage.getItem("infoShown_".concat(n))),l=(0,s.Z)(a,3),u=l[0],d=l[1],j=l[2],y=(0,p.useState)(Array.isArray(r)?(0,S.F_)(r):r),g=(0,s.Z)(y,1)[0],b=(0,p.useCallback)((function(){j(),localStorage.setItem("infoShown_".concat(n),"true")}),[j,n]);return(0,G.jsxs)(A.Z,{children:[(0,G.jsxs)(x.ZP,{container:!0,children:[(0,G.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(m.Z,{variant:"caption",pl:1,children:g})}),(0,G.jsx)(x.ZP,{item:!0,xs:"auto",children:(0,G.jsx)(h.Z,{size:"small",color:"info",variant:"contained",onClick:d,startIcon:(0,G.jsx)(P.G,{icon:k.Fuz}),children:(0,G.jsx)(D.v,{ns:"ui",key18:"info"})})})]}),(0,G.jsx)(K.Z,{containerProps:{maxWidth:"xl"},open:u,onClose:b,children:(0,G.jsxs)(A.Z,{children:[(0,G.jsx)(f.Z,{sx:{py:1},children:(0,G.jsxs)(x.ZP,{container:!0,children:[(0,G.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(m.Z,{variant:"h6",children:c})}),(0,G.jsx)(x.ZP,{item:!0,children:(0,G.jsx)(F.Z,{onClick:b})})]})}),(0,G.jsx)(C.Z,{}),(0,G.jsx)(f.Z,{children:(0,G.jsx)(p.Suspense,{fallback:(0,G.jsx)(Z.Z,{variant:"rectangular",width:"100%",height:500}),children:o})}),(0,G.jsx)(C.Z,{}),(0,G.jsx)(f.Z,{sx:{py:1},children:(0,G.jsx)(F.Z,{large:!0,onClick:b})})]})})]})}var E=e(59215),M=e(66101);function useDisplayArtifact(){var t=(0,p.useContext)(M.t).database,n=(0,p.useState)(t.displayArtifact.get()),e=(0,s.Z)(n,2),r=e[0],i=e[1];return(0,p.useEffect)((function(){return t.displayArtifact.follow((function(t,n){return i(n)}))}),[t]),r}var W=e(68544),T=e(70645),U=e(50765),O=e(46956),q=e(72838),z=e(62002),B=e(40117),_=e(25617),N=(0,p.lazy)((function(){return Promise.all([e.e(889),e.e(673)]).then(e.bind(e,37673))}));function ArtifactFilter(t){var n=t.numShowing,e=t.total,r=(0,g.$)(["artifact","ui"]).t,i=(0,p.useContext)(M.t).database,s=useDisplayArtifact().filterOption,a=(0,p.useCallback)((function(t){return i.displayArtifact.set({filterOption:(0,c.Z)((0,c.Z)({},s),t)})}),[i,s]);return(0,G.jsx)(p.Suspense,{fallback:(0,G.jsx)(Z.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,G.jsx)(A.Z,{children:(0,G.jsxs)(f.Z,{children:[(0,G.jsxs)(x.ZP,{container:!0,children:[(0,G.jsx)(x.ZP,{item:!0,children:(0,G.jsx)(m.Z,{variant:"h6",children:(0,G.jsx)(b.c,{t:r,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,G.jsx)(x.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:n!==e&&(0,G.jsxs)(m.Z,{children:["Filtered ",n," / ",e]})}),(0,G.jsx)(x.ZP,{item:!0,children:(0,G.jsx)(h.Z,{size:"small",color:"error",onClick:function onClick(){return i.displayArtifact.set({action:"reset"})},startIcon:(0,G.jsx)(o.Z,{}),children:(0,G.jsx)(b.c,{t:r,i18nKey:"ui:reset"})})})]}),(0,G.jsx)(p.Suspense,{fallback:(0,G.jsx)(Z.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,G.jsx)(N,{filterOption:s,filterOptionDispatch:a})})]})})})}function ArtifactRedButtons(t){var n=t.artifactIds,e=(0,g.$)(["artifact","ui"]).t,r=(0,p.useContext)(M.t).database,i=(0,p.useMemo)((function(){var t=n.map((function(t){return r.arts.get(t)})),e=t.reduce((function(t,n){return t+(n.lock?0:1)}),0),i=t.length-e,c=e,s=t.reduce((function(t,n){return t+(n.location?1:0)}),0),o=t.reduce((function(t,n){return t+(n.exclude?1:0)}),0);return{numDelete:c,numUnequip:s,numExclude:o,numInclude:t.length-o,numUnlock:e,numLock:i}}),[n,r]),c=i.numDelete,s=i.numUnequip,o=i.numExclude,a=i.numInclude,l=i.numUnlock,u=i.numLock;return(0,G.jsxs)(x.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,G.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!s,onClick:function unequipArtifacts(){return window.confirm("Are you sure you want to unequip ".concat(s," artifacts currently equipped on characters?"))&&n.map((function(t){return r.arts.set(t,{location:""})}))},startIcon:(0,G.jsx)(P.G,{icon:k.wOQ}),children:[(0,G.jsx)(b.c,{t:e,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,G.jsx)(_.Z,{sx:{ml:1},color:s?"success":"secondary",children:s})]})}),(0,G.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:function deleteArtifacts(){return window.confirm("Are you sure you want to delete ".concat(c," artifacts?"))&&n.map((function(t){var n;return!(null!==(n=r.arts.get(t))&&void 0!==n&&n.lock)&&r.arts.remove(t)}))},startIcon:(0,G.jsx)(P.G,{icon:k.$aW}),children:[(0,G.jsx)(b.c,{t:e,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,G.jsx)(_.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,G.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:function excludeArtifacts(){return window.confirm("Are you sure you want to exclude ".concat(a," artifacts from build generations?"))&&n.map((function(t){return r.arts.set(t,{exclude:!0})}))},startIcon:(0,G.jsx)(P.G,{icon:k.gPx}),children:[(0,G.jsx)(b.c,{t:e,i18nKey:"button.excludeArtifacts",children:"Exclude Artifacts"}),(0,G.jsx)(_.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,G.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!o,onClick:function includeArtifacts(){return window.confirm("Are you sure you want to include ".concat(o," artifacts in build generations?"))&&n.map((function(t){return r.arts.set(t,{exclude:!1})}))},startIcon:(0,G.jsx)(P.G,{icon:k.Stf}),children:[(0,G.jsx)(b.c,{t:e,i18nKey:"button.includeArtifacts",children:"Include Artifacts"}),(0,G.jsx)(_.Z,{sx:{ml:1},color:o?"success":"secondary",children:o})]})}),(0,G.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!u,onClick:function unlockArtifacts(){return window.confirm("Are you sure you want to unlock ".concat(u," artifacts?"))&&n.map((function(t){return r.arts.set(t,{lock:!1})}))},startIcon:(0,G.jsx)(z.Z,{}),children:[(0,G.jsx)(b.c,{t:e,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,G.jsx)(_.Z,{sx:{ml:1},color:u?"success":"secondary",children:u})]})}),(0,G.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,G.jsxs)(h.Z,{fullWidth:!0,color:"error",disabled:!l,onClick:function lockArtifacts(){return window.confirm("Are you sure you want to lock ".concat(l," artifacts?"))&&n.map((function(t){return r.arts.set(t,{lock:!0})}))},startIcon:(0,G.jsx)(B.Z,{}),children:[(0,G.jsx)(b.c,{t:e,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,G.jsx)(_.Z,{sx:{ml:1},color:l?"success":"secondary",children:l})]})}),(0,G.jsx)(x.ZP,{item:!0,xs:12,sm:12,md:6,display:"flex",justifyContent:"space-around",children:(0,G.jsx)(m.Z,{variant:"caption",color:"text.secondary",children:(0,G.jsxs)(b.c,{t:e,i18nKey:"buttonHint",children:["Note: the red buttons above only applies to ",(0,G.jsx)("b",{children:"currently filtered artifacts"})]})})})]})}var $=e(44824),Q=e(71310),L=e(91702),R=e(43696),V=(0,r.Z)(U._);function ProbabilityFilter(t){var n=t.probabilityFilter,e=void 0===n?{}:n,r=t.setProbabilityFilter,i=t.disabled,c=void 0!==i&&i;return(0,G.jsxs)(A.Z,{children:[(0,G.jsx)(f.Z,{sx:{py:1},children:(0,G.jsx)(m.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,G.jsx)(C.Z,{}),(0,G.jsx)(f.Z,{children:(0,G.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,G.jsx)(Q.Z,{children:(0,G.jsx)(f.Z,{children:(0,G.jsxs)(m.Z,{children:['This UI only pops up when "Sort by" ',(0,G.jsx)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,G.jsx)(L.Z,{color:"warning",children:" Artifacts that already reach the criteria(100%) or are at 0% are hidden."})]})})})}),(0,G.jsx)(x.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,G.jsx)(R.Z,{statKeys:V,statFilters:e,setStatFilters:r,disabled:c})})]})})]})}var H,J,X=e(44217),Y=p.lazy((function(){return Promise.all([e.e(219),e.e(213)]).then(e.bind(e,66585))})),tt=p.lazy((function(){return e.e(383).then(e.bind(e,66311))})),nt={xs:1,sm:2,md:3,lg:3,xl:4},et={xs:10,sm:12,md:24,lg:24,xl:24};function PageArtifact(){var t=(0,g.$)(["artifact","ui"]).t,n=(0,p.useContext)(M.t).database,e=useDisplayArtifact(),m=(0,I.Z)(!1),k=(0,s.Z)(m,3),P=k[0],C=k[1],F=k[2],K=(0,T.Z)(),D=et[K],z=e.sortType,B=e.effFilter,_=e.ascending,N=e.probabilityFilter,Q="probability"===z,L=(0,p.useState)(0),R=(0,s.Z)(L,2),V=R[0],rt=R[1],it=(0,p.useRef)(null),ct=(0,W.Z)(),st=(0,s.Z)(ct,2),ot=st[0],at=st[1],lt=(0,p.useMemo)((function(){return new Set(B)}),[B]),ut=(0,p.useCallback)((function(t){return n.arts.remove(t)}),[n]);(0,p.useEffect)((function(){return y.ZP.send({hitType:"pageview",page:"/artifact"}),n.arts.followAny((function(){return at()}))}),[n,at]);var dt=(0,p.useCallback)((function(t){return n.displayArtifact.set({probabilityFilter:t})}),[n]),ft=(0,p.useMemo)((function(){return!n.arts.values.length}),[n]),xt=(0,p.useMemo)((function(){return(0,$.x3)(lt,N)}),[lt,N]),ht=(0,p.useMemo)((function(){return(0,$.EM)(lt)}),[lt]),jt=(0,p.useDeferredValue)(e),Zt=(0,p.useDeferredValue)(N);(0,p.useEffect)((function(){if(Q)return n.arts.values.forEach((function(t){return n.arts.setProbability(t.id,(0,X.B)(t,Zt))})),function(){return n.arts.values.forEach((function(t){return n.arts.setProbability(t.id,-1)}))}}),[n,Q,Zt]);var mt=(0,p.useMemo)((function(){var t,e=jt.sortType,r=void 0===e?$.OQ[0]:e,i=jt.ascending,s=void 0!==i&&i,o=jt.filterOption,a=n.arts.values;Q&&(a=a.filter((function(t){return t.probability&&1!==t.probability})));var l=a.filter((0,O.C)(o,ht)).sort((0,O.e)(null!==(t=$.t$[r])&&void 0!==t?t:[],s,xt)).map((function(t){return t.id}));return(0,c.Z)({artifactIds:l,totalArtNum:a.length},ot)}),[jt,ot,n,xt,ht,Q]),pt=mt.artifactIds,yt=mt.totalArtNum,gt=(0,p.useMemo)((function(){var t=Math.ceil(pt.length/D),n=(0,S.uZ)(V,0,t-1);return{artifactIdsToShow:pt.slice(n*D,(n+1)*D),numPages:t,currentPageIndex:n}}),[pt,V,D]),bt=gt.artifactIdsToShow,vt=gt.numPages,wt=gt.currentPageIndex,At=pt.length!==yt?"".concat(pt.length,"/").concat(yt):"".concat(yt),kt=(0,p.useCallback)((function(t,n){var e;null===(e=it.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),rt(n-1)}),[rt,it]);return(0,G.jsxs)(l.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,G.jsx)(p.Suspense,{fallback:!1,children:(0,G.jsx)(Y,{artifactIdToEdit:P?"new":"",cancelEdit:F,allowUpload:!0,allowEmpty:!0})}),(0,G.jsx)(InfoComponent,{pageKey:"artifactPage",modalTitle:t(H||(H=(0,i.Z)(["info.title"]))),text:t("tipsOfTheDay",{returnObjects:!0}),children:(0,G.jsx)(tt,{})}),ft&&(0,G.jsxs)(u.Z,{severity:"info",variant:"filled",children:["Looks like you haven't added any artifacts yet. If you want, there are ",(0,G.jsx)(d.Z,{color:"warning.main",component:v.rU,to:"/scanner",children:"automatic scanners"})," that can speed up the import process!"]}),(0,G.jsx)(ArtifactFilter,{numShowing:pt.length,total:yt}),(0,G.jsx)(A.Z,{ref:it,children:(0,G.jsxs)(f.Z,{children:[(0,G.jsxs)(x.ZP,{container:!0,sx:{mb:1},children:[(0,G.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)("span",{children:(0,G.jsx)(b.c,{t:t,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"})})}),(0,G.jsx)(x.ZP,{item:!0,children:(0,G.jsx)(h.Z,{size:"small",color:"error",onClick:function onClick(){return n.displayArtifact.set({effFilter:(0,r.Z)(U._)})},startIcon:(0,G.jsx)(o.Z,{}),children:(0,G.jsx)(b.c,{t:t,i18nKey:"ui:reset"})})})]}),(0,G.jsx)(w.Z,{selectedKeys:B,onChange:function onChange(t){return n.displayArtifact.set({effFilter:t})}})]})}),(0,G.jsx)(A.Z,{children:(0,G.jsxs)(f.Z,{children:[(0,G.jsxs)(x.ZP,{container:!0,alignItems:"center",sx:{pb:2},children:[(0,G.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(j.Z,{count:vt,page:wt+1,onChange:kt})}),(0,G.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(ShowingArt,{numShowing:bt.length,total:At,t:t})}),(0,G.jsxs)(x.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,display:"flex",children:[(0,G.jsx)(l.Z,{flexGrow:1}),(0,G.jsx)(E.Z,{sortKeys:(0,r.Z)($.OQ),value:z,onChange:function onChange(t){return n.displayArtifact.set({sortType:t})},ascending:_,onChangeAsc:function onChangeAsc(t){return n.displayArtifact.set({ascending:t})}})]})]}),(0,G.jsx)(ArtifactRedButtons,{artifactIds:pt})]})}),Q&&(0,G.jsx)(ProbabilityFilter,{probabilityFilter:N,setProbabilityFilter:dt}),(0,G.jsx)(h.Z,{fullWidth:!0,onClick:C,color:"info",startIcon:(0,G.jsx)(a.Z,{}),children:t(J||(J=(0,i.Z)(["addNew"])))}),(0,G.jsx)(p.Suspense,{fallback:(0,G.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,G.jsx)(x.ZP,{container:!0,spacing:1,columns:nt,children:bt.map((function(t){return(0,G.jsx)(x.ZP,{item:!0,xs:1,children:(0,G.jsx)(q.Z,{artifactId:t,effFilter:lt,onDelete:ut,editorProps:{},canExclude:!0,canEquip:!0})},t)}))})}),vt>1&&(0,G.jsx)(A.Z,{children:(0,G.jsx)(f.Z,{children:(0,G.jsxs)(x.ZP,{container:!0,children:[(0,G.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(j.Z,{count:vt,page:wt+1,onChange:kt})}),(0,G.jsx)(x.ZP,{item:!0,children:(0,G.jsx)(ShowingArt,{numShowing:bt.length,total:At,t:t})})]})})})]})}function ShowingArt(t){var n=t.numShowing,e=t.total,r=t.t;return(0,G.jsx)(m.Z,{color:"text.secondary",children:(0,G.jsxs)(b.c,{t:r,i18nKey:"showingNum",count:n,value:e,children:["Showing ",(0,G.jsx)("b",{children:{count:n}})," out of ",{value:e}," Artifacts"]})})}},70645:function(t,n,e){e.d(n,{Z:function(){return useMediaQueryUp}});var r=e(13967),i=e(95193);function useMediaQueryUp(){var t=(0,r.Z)(),n=(0,i.Z)(t.breakpoints.up("sm")),e=(0,i.Z)(t.breakpoints.up("md")),c=(0,i.Z)(t.breakpoints.up("lg"));return(0,i.Z)(t.breakpoints.up("xl"))?"xl":c?"lg":e?"md":n?"sm":"xs"}},46956:function(t,n,e){e.d(n,{C:function(){return filterFunction},e:function(){return sortFunction}});var r=e(29439),i=e(37762);function sortFunction(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return function(c,s){var o,a=(0,i.Z)(t);try{for(a.s();!(o=a.n()).done;){var l=o.value,u=0,d=e[l],f=d(c),x=d(s);if(0!==(u="string"===typeof f&&"string"===typeof x?f.localeCompare(x):x-f))return r.includes(l)?u:(n?-1:1)*u}}catch(h){a.e(h)}finally{a.f()}return 0}}function filterFunction(t,n){return function(e){return Object.entries(t).every((function(t){var i=(0,r.Z)(t,2),c=i[0],s=i[1];return n[c]&&n[c](e,s)}))}}}}]);
//# sourceMappingURL=846.57d1651d.chunk.js.map