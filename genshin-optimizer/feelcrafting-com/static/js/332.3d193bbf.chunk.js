"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[332],{4332:function(e,n,t){t.r(n),t.d(n,{default:function(){return CharacterSelectionModal}});var r=t(4942),a=t(1413),i=t(45987),o=t(93433),s=t(29439),l=t(39504),c=t(64554),d=t(58165),u=t(94721),h=t(61889),x=t(66934),p=t(40165),f=t(69293),v=t(66647),Z=t(20890),g=t(72791),y=t(22020),m=t(3992),j=t(71310),C=t(30865),w=t(68198),b=t(9321),k=t(59215),S=t(25617),z=t(10157),D=t(48510),I=t(73578),N=t(13746),T=t(947),P=t(2139),V=t(66101),K=t(13434),M=t(12761),_=t(68544),A=t(42320),W=t(24351),E=t(50921),G=t(46956),F=t(80184),L=["className"],q=Object.keys(E.V3);function CharacterSelectionModal(e){var n=e.show,t=e.onHide,r=e.onSelect,a=e.filter,i=void 0===a?function(){return!0}:a,x=e.newFirst,p=void 0!==x&&x,f=(0,y.$)(["page_character","charNames_gen"]).t,v=(0,g.useContext)(V.t).database,Z=(0,g.useState)((function(){return v.displayCharacter.get()})),j=(0,s.Z)(Z,2),C=j[0],S=j[1];(0,g.useEffect)((function(){return v.displayCharacter.follow((function(e,n){return S(n)}))}),[v,S]);var z=(0,A.Z)((function(){return T.Z.getAll}),[]),P=(0,_.Z)(),K=(0,s.Z)(P,2),M=K[0],L=K[1];(0,g.useEffect)((function(){return v.charMeta.followAny((function(e){return L()}))}),[L,v]);var H=(0,g.useState)(""),J=(0,s.Z)(H,2),O=J[0],R=J[1],U=(0,g.useDeferredValue)(O),$=(0,g.useDeferredValue)(C),B=(0,g.useDeferredValue)(M),Q=(0,g.useMemo)((function(){var e;if(!z)return[];var n=$.element,t=$.weaponType,r=$.sortType,a=$.ascending,s=[].concat((0,o.Z)(p?["new"]:[]),(0,o.Z)(null!==(e=E.V3[r])&&void 0!==e?e:[]));return B&&W.IV.filter((function(e){return i(v.chars.get(e),z[e])})).filter((0,G.C)({element:n,weaponType:t,name:U},(0,E.zU)(v,z))).sort((0,G.e)(s,a,(0,E._L)(v,z),["new","favorite"]))}),[v,p,$,z,B,U,i]);if(!z)return null;var X=C.weaponType,Y=C.element,ee=C.sortType,ne=C.ascending;return(0,F.jsx)(b.Z,{open:n,onClose:t,sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:(0,F.jsxs)(m.Z,{children:[(0,F.jsxs)(l.Z,{sx:{py:1,display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,F.jsx)(I.Z,{sx:{height:"100%"},onChange:function onChange(e){return v.displayCharacter.set({weaponType:e})},value:X,size:"small"}),(0,F.jsx)(D.Z,{sx:{height:"100%"},onChange:function onChange(e){return v.displayCharacter.set({element:e})},value:Y,size:"small"}),(0,F.jsx)(c.Z,{flexGrow:1,children:(0,F.jsx)(d.Z,{autoFocus:!0,value:O,onChange:function onChange(e){return R(e.target.value)},label:f("characterName"),size:"small",sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),(0,F.jsx)(k.Z,{sx:{height:"100%"},sortKeys:q,value:ee,onChange:function onChange(e){return v.displayCharacter.set({sortType:e})},ascending:ne,onChangeAsc:function onChangeAsc(e){return v.displayCharacter.set({ascending:e})}}),(0,F.jsx)(w.Z,{onClick:t})]}),(0,F.jsx)(u.Z,{}),(0,F.jsx)(N.R.Provider,{value:{teamData:void 0},children:(0,F.jsx)(l.Z,{children:(0,F.jsx)(h.ZP,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:Q.map((function(e){return(0,F.jsx)(h.ZP,{item:!0,xs:1,children:(0,F.jsx)(SelectionCard,{characterKey:e,onClick:function onClick(){t(),null===r||void 0===r||r(e)}})},e)}))})})})]})})}var H=(0,x.ZP)((function(e){var n=e.className,t=(0,i.Z)(e,L);return(0,F.jsx)(p.Z,(0,a.Z)((0,a.Z)({},t),{},{classes:{popper:n}}))}))((0,r.Z)({},"& .".concat(f.Z.tooltip),{padding:0}));function SelectionCard(e){var n,t=e.characterKey,r=e.onClick,a=(0,M.Z)().gender,i=(0,A.Z)((function(){return T.Z.get(t,a)}),[t,a]),o=(0,K.Z)(t),s=null!==o&&void 0!==o?o:{},l=s.level,d=void 0===l?1:l,u=s.ascension,h=void 0===u?0:u,x=s.constellation,p=void 0===x?0:x;return(0,F.jsx)(H,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",title:(0,F.jsx)(c.Z,{sx:{width:300},children:(0,F.jsx)(C.Z,{hideStats:!0,characterKey:t})}),children:(0,F.jsx)(c.Z,{children:(0,F.jsx)(j.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,F.jsx)(v.Z,{onClick:r,children:(0,F.jsxs)(c.Z,{display:"flex",position:"relative",className:"grad-".concat(null===i||void 0===i?void 0:i.rarity,"star"),sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.5,backgroundImage:"url(".concat(null===i||void 0===i?void 0:i.bannerImg,")"),backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[(0,F.jsx)(c.Z,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:(0,F.jsx)(c.Z,{component:"img",src:null===i||void 0===i?void 0:i.thumbImg,width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),(0,F.jsxs)(c.Z,{flexGrow:1,sx:{pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[(0,F.jsx)(Z.Z,{variant:"body2",children:(0,F.jsx)(S.Z,{color:null===i||void 0===i?void 0:i.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:null===i||void 0===i?void 0:i.name})}),o?(0,F.jsxs)(c.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,F.jsxs)(c.Z,{sx:{textShadow:"0 0 5px gray"},children:[(0,F.jsxs)(Z.Z,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",d]}),(0,F.jsxs)(Z.Z,{variant:"body2",component:"span",color:"text.secondary",children:["/",P.SJ[h]]})]}),(0,F.jsxs)(Z.Z,{variant:"body2",children:["C",p]})]}):(0,F.jsx)(Z.Z,{component:"span",variant:"body2",children:(0,F.jsx)(S.Z,{children:"NEW"})}),(0,F.jsx)(Z.Z,{variant:"body2",children:(0,F.jsx)(z.q,{stars:null!==(n=null===i||void 0===i?void 0:i.rarity)&&void 0!==n?n:1,colored:!0})})]})]})})})})})}}}]);
//# sourceMappingURL=332.3d193bbf.chunk.js.map