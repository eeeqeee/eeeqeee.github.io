"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[923],{74476:function(e,n,i){i.r(n),i.d(n,{default:function(){return WeaponEditor}});var t=i(29439),s=i(40117),o=i(62002),r=i(39504),a=i(61889),l=i(64554),c=i(20890),d=i(2199),u=i(24518),x=i(9585),p=i(94721),f=i(15021),h=i(72791),m=i(3992),Z=i(71310),j=i(30066),v=i(68198),g=i(37503),y=i(88034),w=i(29371),k=i(9321),C=i(6805),b=i(10157),P=i(13746),W=i(60705),D=i(947),R=i(2139),T=i(66218),S=i(66101),E=i(27235),F=i(73036),I=i(24711),L=i(12761),N=i(42320),z=i(74480),B=i(80184),K=h.lazy((function(){return i.e(409).then(i.bind(i,44361))}));function WeaponEditor(e){var n,i=e.weaponId,M=e.footer,O=void 0!==M&&M,G=e.onClose,J=e.extraButtons,_=(0,h.useContext)(P.R).data,q=(0,h.useContext)(W.M).setFormulaData,H=(0,h.useContext)(S.t).database,U=(0,z.Z)(i),A=null!==U&&void 0!==U?U:{},Q=A.key,V=void 0===Q?"":Q,X=A.level,Y=void 0===X?0:X,$=A.refinement,ee=void 0===$?1:$,ne=A.ascension,ie=void 0===ne?0:ne,te=A.lock,se=A.location,oe=void 0===se?"":se,re=A.id,ae=(0,N.Z)((function(){return T.Z.get(V)}),[V]),le=(0,h.useCallback)((function(e){H.weapons.set(i,e)}),[i,H]),ce=(0,L.Z)().gender,de=(0,N.Z)((function(){return oe?D.Z.get(H.chars.LocationToCharacterKey(oe),ce):void 0}),[H,ce,oe]),ue=de&&de.weaponTypeKey,xe=(0,h.useCallback)((function(e){return re&&H.weapons.set(re,{location:e})}),[H,re]),pe=(0,h.useCallback)((function(e){return e.weaponTypeKey===(null===ae||void 0===ae?void 0:ae.weaponType)}),[ae]),fe=(0,I.Z)(),he=(0,t.Z)(fe,3),me=he[0],Ze=he[1],je=he[2],ve=null===ae||void 0===ae?void 0:ae.getImg(ie);(0,h.useEffect)((function(){if(ae&&le&&ae.key===(null===U||void 0===U?void 0:U.key)&&ae.rarity<=2&&(Y>70||ie>4)){var e=(0,t.Z)(R.vF[0],2),n=e[0],i=e[1];le({level:n,ascension:i})}}),[ae,U,le,Y,ie]);var ge=(0,h.useMemo)((function(){return ae&&U&&(0,F.mP)([ae.data,(0,F.v0)(U)])}),[ae,U]);return(0,B.jsx)(k.Z,{open:!!i,onClose:G,containerProps:{maxWidth:"md"},children:(0,B.jsxs)(Z.Z,{children:[(0,B.jsx)(K,{ascension:ie,show:me,onHide:je,onSelect:function onSelect(e){return le({key:e})},weaponTypeFilter:ue}),(0,B.jsx)(r.Z,{children:ae&&ge&&(0,B.jsxs)(a.ZP,{container:!0,spacing:1.5,children:[(0,B.jsx)(a.ZP,{item:!0,xs:12,sm:3,children:(0,B.jsxs)(a.ZP,{container:!0,spacing:1.5,children:[(0,B.jsx)(a.ZP,{item:!0,xs:6,sm:12,children:(0,B.jsx)(l.Z,{component:"img",src:ve,className:"grad-".concat(ae.rarity,"star"),sx:{maxWidth:256,width:"100%",height:"auto",borderRadius:1}})}),(0,B.jsx)(a.ZP,{item:!0,xs:6,sm:12,children:(0,B.jsx)(c.Z,{children:(0,B.jsx)("small",{children:ae.description})})})]})}),(0,B.jsxs)(a.ZP,{item:!0,xs:12,sm:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,B.jsx)(l.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:(0,B.jsxs)(d.Z,{children:[(0,B.jsx)(u.Z,{color:"info",onClick:Ze,children:null!==(n=null===ae||void 0===ae?void 0:ae.name)&&void 0!==n?n:"Select a Weapon"}),(null===ae||void 0===ae?void 0:ae.hasRefinement)&&(0,B.jsx)(C.Z,{refinement:ee,setRefinement:function setRefinement(e){return le({refinement:e})}}),J]})}),(0,B.jsxs)(l.Z,{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"space-between",children:[ae&&(0,B.jsx)(w.Z,{level:Y,ascension:ie,setBoth:le,useLow:!ae.hasRefinement}),(0,B.jsx)(u.Z,{color:"error",onClick:function onClick(){return re&&H.weapons.set(re,{lock:!te})},startIcon:te?(0,B.jsx)(s.Z,{}):(0,B.jsx)(o.Z,{}),children:te?"Locked":"Unlocked"})]}),(0,B.jsx)(c.Z,{children:(0,B.jsx)(b.q,{stars:ae.rarity})}),(0,B.jsx)(c.Z,{variant:"subtitle1",children:(0,B.jsx)("strong",{children:ae.passiveName})}),(0,B.jsx)(c.Z,{gutterBottom:!0,children:ae.passiveName&&ae.passiveDescription(ge.get(E.ri.weapon.refineIndex).value)}),(0,B.jsxs)(l.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,B.jsxs)(m.Z,{children:[(0,B.jsx)(x.Z,{title:"Main Stats",titleTypographyProps:{variant:"subtitle2"}}),(0,B.jsx)(p.Z,{}),(0,B.jsx)(y.lD,{children:[E.ri.weapon.main,E.ri.weapon.sub,E.ri.weapon.sub2].map((function(e){var n=ge.get(e);return n.isEmpty||!n.value?null:(0,B.jsx)(y.JW,{node:n,component:f.ZP,data:_,setFormulaData:q},JSON.stringify(n.info))}))})]}),_&&ae.document&&(0,B.jsx)(g.Z,{sections:ae.document})]})]})]})}),O&&re&&(0,B.jsx)(r.Z,{sx:{py:1},children:(0,B.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(a.ZP,{item:!0,flexGrow:1,children:(0,B.jsx)(j.W,{location:oe,setLocation:xe,filter:pe,autoCompleteProps:{getOptionDisabled:function getOptionDisabled(e){return!e.key},disableClearable:!0}})}),(0,B.jsx)(a.ZP,{item:!0,flexGrow:2}),!!G&&(0,B.jsx)(a.ZP,{item:!0,children:(0,B.jsx)(v.Z,{sx:{height:"100%"},large:!0,onClick:G})})]})})]})})}}}]);
//# sourceMappingURL=923.857f3be1.chunk.js.map