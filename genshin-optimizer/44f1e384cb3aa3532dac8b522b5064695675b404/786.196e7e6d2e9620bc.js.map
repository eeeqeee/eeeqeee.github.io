{"version":3,"file":"786.196e7e6d2e9620bc.js","mappings":"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","sources":["webpack:///../../node_modules/@mui/icons-material/esm/FactCheck.js","webpack:///../../node_modules/@mui/icons-material/esm/FavoriteBorder.js","webpack:///../../node_modules/@mui/icons-material/esm/Science.js","webpack:///../../node_modules/@mui/icons-material/esm/TrendingUp.js","webpack:///./src/app/Components/Artifact/ArtifactCardPico.tsx","webpack:///./src/app/Components/Artifact/ArtifactTooltip.tsx","webpack:///./src/app/SVGIcons/ArtifactSlot/CircletIcon.tsx","webpack:///./src/app/SVGIcons/ArtifactSlot/GobletIcon.tsx","webpack:///./src/app/SVGIcons/ArtifactSlot/SandsIcon.tsx","webpack:///./src/app/Components/Artifact/SlotIcon.tsx","webpack:///./src/app/Components/Weapon/WeaponFullCard.tsx","webpack:///./src/app/Components/Character/CharacterCard.tsx","webpack:///./src/app/Components/Character/CharacterCardPico.tsx","webpack:///./src/app/Components/ToggleButton/WeaponToggle.tsx","webpack:///./src/app/Components/Weapon/WeaponCardPico.tsx","webpack:///./src/app/Components/Weapon/WeaponNameTooltip.tsx","webpack:///./src/app/Data/Resonance.tsx","webpack:///./src/app/Components/ElementCycle.tsx","webpack:///./src/app/ReactHooks/useCharMeta.tsx","webpack:///./src/app/ReactHooks/useCharSelectionCallback.tsx","webpack:///./src/app/ReactHooks/useCharacter.tsx","webpack:///./src/app/ReactHooks/useCharacterReducer.tsx","webpack:///./src/app/ReactHooks/useTeamData.tsx","webpack:///./src/app/ReactHooks/useWeapon.tsx","webpack:///./src/app/SVGIcons/ArtifactSlot/PlumeIcon.tsx","webpack:///./src/app/Util/totalUtils.ts"],"sourcesContent":["import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z\"\n}), 'FactCheck');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"\n}), 'FavoriteBorder');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z\"\n}), 'Science');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z\"\n}), 'TrendingUp');","import { allElementsWithPhy, SlotKey } from '@genshin-optimizer/consts';\r\nimport { artifactAsset } from '@genshin-optimizer/g-assets';\r\nimport { Box, Typography } from '@mui/material';\r\nimport Assets from '../../Assets/Assets';\r\nimport Artifact from '../../Data/Artifacts/Artifact';\r\nimport StatIcon from '../../KeyMap/StatIcon';\r\nimport { ICachedArtifact } from '../../Types/artifact';\r\nimport CardDark from '../Card/CardDark';\r\nimport SqBadge from '../SqBadge';\r\nimport ArtifactTooltip from './ArtifactTooltip';\r\n\r\nexport default function ArtifactCardPico({ artifactObj: art, slotKey: key }: { artifactObj: ICachedArtifact | undefined, slotKey: SlotKey }) {\r\n  // Blank artifact slot icon\r\n  if (!art)\r\n    return <CardDark sx={{ display: \"flex\", flexDirection: \"column\", height: \"100%\" }}>\r\n      <Box sx={{ width: \"100%\", pb: \"100%\", position: \"relative\", }}>\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            width: \"70%\", height: \"70%\",\r\n            left: \"50%\", top: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            opacity: 0.7\r\n          }}\r\n          component=\"img\"\r\n          src={Assets.slot[key]}\r\n        />\r\n      </Box>\r\n    </CardDark>\r\n\r\n  // Actual artifact icon + info\r\n  const { mainStatKey, rarity, level } = art\r\n  const element = allElementsWithPhy.find(ele => art.mainStatKey.includes(ele))\r\n  const color = element ?? \"secondary\"\r\n\r\n  return <ArtifactTooltip art={art}><CardDark sx={{ display: \"flex\", flexDirection: \"column\", position: \"relative\" }}>\r\n    <Box\r\n      component=\"img\"\r\n      className={`grad-${rarity}star`}\r\n      src={artifactAsset(art.setKey, art.slotKey)}\r\n      maxWidth=\"100%\"\r\n      maxHeight=\"100%\"\r\n    />\r\n    <Typography sx={{ position: \"absolute\", fontSize: \"0.75rem\", lineHeight: 1, opacity: 0.85, pointerEvents: \"none\", }}>\r\n      <strong><SqBadge sx={{ p: 0.5 }} color={Artifact.levelVariant(level)}><strong>+{level}</strong></SqBadge></strong>\r\n    </Typography>\r\n    <Typography sx={{ position: \"absolute\", fontSize: \"0.75rem\", lineHeight: 1, opacity: 0.85, pointerEvents: \"none\", bottom: 0, right: 0 }}>\r\n      <SqBadge color={color} sx={{ p: 0.5 }}><StatIcon statKey={mainStatKey} iconProps={{ fontSize: \"inherit\" }} /></SqBadge>\r\n    </Typography>\r\n  </CardDark></ArtifactTooltip>\r\n}\r\n","import { Box, Skeleton, Typography } from \"@mui/material\";\r\nimport { Suspense } from \"react\";\r\nimport { getArtSheet } from \"../../Data/Artifacts\";\r\nimport Artifact from \"../../Data/Artifacts/Artifact\";\r\nimport KeyMap, { cacheValueString } from \"../../KeyMap\";\r\nimport StatIcon from \"../../KeyMap/StatIcon\";\r\nimport { iconInlineProps } from \"../../SVGIcons\";\r\nimport { ICachedArtifact, ICachedSubstat } from \"../../Types/artifact\";\r\nimport { clamp } from \"../../Util/Util\";\r\nimport BootstrapTooltip from \"../BootstrapTooltip\";\r\nimport SqBadge from \"../SqBadge\";\r\nimport { StarsDisplay } from \"../StarDisplay\";\r\nimport SlotIcon from \"./SlotIcon\";\r\n\r\nexport default function ArtifactTooltip({ art, children }: { art: ICachedArtifact, children: JSX.Element }) {\r\n  const fallback = <Box>\r\n    <Skeleton variant=\"rectangular\" width={100} height={100} />\r\n  </Box>\r\n  const title = <Suspense fallback={fallback}>\r\n    <ArtifactData art={art} />\r\n  </Suspense>\r\n\r\n  return <BootstrapTooltip placement=\"top\" title={title} disableInteractive>\r\n    {children}\r\n  </BootstrapTooltip>\r\n}\r\nfunction ArtifactData({ art }: { art: ICachedArtifact }) {\r\n  const sheet = getArtSheet(art.setKey)\r\n  const { slotKey, level, rarity, mainStatKey, substats } = art\r\n  const slotName = sheet.getSlotName(slotKey)\r\n  const mainStatUnit = KeyMap.unit(mainStatKey)\r\n  const mainVariant = KeyMap.getVariant(mainStatKey)\r\n  return <Box p={1}>\r\n    <Typography variant='h6'><SlotIcon slotKey={slotKey} iconProps={iconInlineProps} /> {slotName}</Typography>\r\n    <Typography variant=\"subtitle1\" color={`${mainVariant}.main`}><StatIcon statKey={mainStatKey} iconProps={iconInlineProps} /> {KeyMap.get(mainStatKey)} {cacheValueString(Artifact.mainStatValue(mainStatKey, rarity, level) ?? 0, KeyMap.unit(mainStatKey))}{mainStatUnit}</Typography>\r\n    <Typography variant=\"subtitle2\" sx={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }} ><StarsDisplay stars={rarity} /><SqBadge color={Artifact.levelVariant(level)}>+{level}</SqBadge> </Typography>\r\n    <Box py={1}>\r\n      {substats.map((stat: ICachedSubstat) => !!stat.value && <Typography key={stat.key} color={`roll${clamp(stat.rolls.length, 1, 6)}.main`}>\r\n        <StatIcon statKey={stat.key} iconProps={iconInlineProps} /> {KeyMap.getStr(stat.key)} <strong>{`+${cacheValueString(stat.value, KeyMap.unit(stat.key))}${KeyMap.unit(stat.key)}`}</strong>\r\n      </Typography>)}\r\n    </Box>\r\n\r\n    <Typography color=\"success.main\">{sheet.name}</Typography>\r\n  </Box>\r\n}\r\n","import { createSvgIcon } from \"@mui/material\";\r\n\r\nconst CircletIcon = createSvgIcon(<path d=\"M 21.929688 8.652344 L 22.390625 9.113281 L 18 12.234375 L 12.460938 5.765625 L 13.847656 4.378906 L 12 2.066406 L 10.152344 4.378906 L 11.539062 5.765625 L 6 12.234375 L 1.609375 9.113281 L 2.070312 8.652344 L 0 7.148438 L 5.070312 19.164062 L 12 21.933594 L 18.929688 19.164062 L 24 7.148438 Z M 14.96875 15.546875 L 13.441406 15.804688 C 12.988281 15.878906 12.621094 16.214844 12.507812 16.660156 L 12.082031 18.375 C 12.074219 18.414062 12.039062 18.441406 12 18.441406 C 11.960938 18.441406 11.925781 18.414062 11.917969 18.375 L 11.492188 16.660156 C 11.378906 16.214844 11.011719 15.878906 10.558594 15.804688 L 9.03125 15.546875 C 8.984375 15.546875 8.945312 15.511719 8.945312 15.460938 C 8.945312 15.414062 8.984375 15.378906 9.03125 15.378906 L 10.558594 15.121094 C 11.011719 15.046875 11.378906 14.710938 11.492188 14.265625 L 11.917969 12.550781 C 11.925781 12.511719 11.960938 12.484375 12 12.484375 C 12.039062 12.484375 12.074219 12.511719 12.082031 12.550781 L 12.507812 14.265625 C 12.621094 14.710938 12.988281 15.046875 13.441406 15.121094 L 14.96875 15.378906 C 15.015625 15.378906 15.054688 15.414062 15.054688 15.460938 C 15.054688 15.511719 15.015625 15.546875 14.96875 15.546875 Z M 14.96875 15.546875 \" />, \"Circlet\")\r\nexport default CircletIcon\r\n","import { createSvgIcon } from \"@mui/material\";\r\n\r\nconst GobletIcon = createSvgIcon(<path d=\"M 16.363281 14.921875 C 23.429688 10.980469 23.429688 8.828125 23.425781 3.105469 L 0.734375 3.105469 C 0.734375 8.828125 0.734375 10.972656 7.796875 14.921875 C 7.796875 17.921875 10.777344 17.117188 10.777344 18.671875 C 10.90625 19.984375 10.449219 20.742188 9.804688 20.859375 C 7.730469 21.144531 4.03125 22.46875 4.007812 23.882812 L 20.15625 23.882812 C 20.128906 22.46875 16.429688 21.140625 14.355469 20.859375 C 13.714844 20.742188 13.25 19.984375 13.382812 18.671875 C 13.382812 17.117188 16.363281 17.921875 16.363281 14.921875 Z M 12.789062 9.925781 L 12.195312 12.316406 C 12.183594 12.367188 12.136719 12.40625 12.082031 12.40625 C 12.027344 12.40625 11.980469 12.367188 11.96875 12.316406 L 11.371094 9.925781 C 11.214844 9.304688 10.707031 8.832031 10.074219 8.726562 L 7.9375 8.375 C 7.878906 8.367188 7.835938 8.316406 7.835938 8.257812 C 7.835938 8.199219 7.878906 8.148438 7.9375 8.144531 L 10.074219 7.789062 C 10.707031 7.683594 11.214844 7.210938 11.371094 6.589844 L 11.96875 4.199219 C 11.980469 4.148438 12.027344 4.109375 12.082031 4.113281 C 12.132812 4.113281 12.179688 4.148438 12.195312 4.199219 L 12.789062 6.589844 C 12.945312 7.210938 13.453125 7.683594 14.089844 7.789062 L 16.222656 8.144531 C 16.28125 8.148438 16.324219 8.199219 16.324219 8.257812 C 16.324219 8.316406 16.28125 8.367188 16.222656 8.375 L 14.089844 8.730469 C 13.457031 8.835938 12.945312 9.304688 12.789062 9.925781 Z M 22.871094 2.371094 L 1.128906 2.371094 C 0.828125 2.371094 0.542969 2.253906 0.332031 2.042969 C 0.117188 1.832031 0 1.542969 0 1.246094 C 0 0.945312 0.117188 0.65625 0.328125 0.445312 C 0.542969 0.234375 0.828125 0.117188 1.128906 0.117188 L 22.871094 0.117188 C 23.171875 0.117188 23.457031 0.234375 23.671875 0.445312 C 23.882812 0.65625 24 0.945312 24 1.246094 C 24 1.542969 23.882812 1.832031 23.667969 2.042969 C 23.457031 2.253906 23.171875 2.371094 22.871094 2.371094 Z M 22.871094 2.371094 \" />, \"Goblet\")\r\nexport default GobletIcon\r\n","import { createSvgIcon } from \"@mui/material\";\r\n\r\nconst SandsIcon = createSvgIcon(<path d=\"M 20.046875 21.785156 L 18.644531 21.785156 L 18.644531 20.167969 C 18.644531 14.105469 13.035156 13.808594 13.035156 11.742188 L 13.035156 11.621094 C 13.03125 11.121094 13.285156 10.65625 13.707031 10.386719 C 15.195312 9.425781 18.460938 8.136719 18.636719 3.707031 C 18.640625 3.609375 18.605469 3.507812 18.535156 3.4375 C 18.464844 3.363281 18.371094 3.324219 18.269531 3.324219 L 5.730469 3.324219 C 5.628906 3.324219 5.535156 3.363281 5.464844 3.4375 C 5.394531 3.507812 5.355469 3.605469 5.359375 3.707031 C 5.53125 8.136719 8.804688 9.425781 10.292969 10.394531 C 10.710938 10.664062 10.964844 11.128906 10.964844 11.628906 L 10.964844 11.75 C 10.964844 13.816406 5.355469 14.113281 5.355469 20.175781 L 5.355469 21.792969 L 3.949219 21.792969 C 3.75 21.792969 3.585938 21.953125 3.582031 22.152344 L 3.582031 23.632812 C 3.582031 23.835938 3.746094 24 3.949219 24 L 20.046875 24 C 20.253906 24 20.417969 23.835938 20.417969 23.632812 L 20.417969 22.152344 C 20.417969 21.949219 20.253906 21.785156 20.046875 21.785156 Z M 12 21.785156 L 6.6875 21.785156 C 6.6875 17.058594 11.410156 18.09375 11.410156 16.171875 L 11.410156 10.265625 C 11.410156 10.265625 8.601562 8.640625 8.601562 7.457031 L 15.394531 7.457031 C 15.394531 8.640625 12.589844 10.265625 12.589844 10.265625 L 12.589844 16.171875 C 12.589844 18.09375 17.316406 17.058594 17.316406 21.785156 Z M 20.417969 0.367188 L 20.417969 1.847656 C 20.417969 2.050781 20.253906 2.214844 20.046875 2.214844 L 3.949219 2.214844 C 3.746094 2.214844 3.582031 2.050781 3.582031 1.847656 L 3.582031 0.367188 C 3.582031 0.164062 3.746094 0 3.949219 0 L 20.046875 0 C 20.253906 0 20.417969 0.164062 20.417969 0.367188 Z M 20.417969 0.367188 \" />, \"Sands\")\r\nexport default SandsIcon\r\n","import { SlotKey } from \"@genshin-optimizer/consts\";\r\nimport { SvgIconProps } from \"@mui/material\";\r\nimport CircletIcon from \"../../SVGIcons/ArtifactSlot/CircletIcon\";\r\nimport FlowerIcon from \"../../SVGIcons/ArtifactSlot/FlowerIcon\";\r\nimport GobletIcon from \"../../SVGIcons/ArtifactSlot/GobletIcon\";\r\nimport PlumeIcon from \"../../SVGIcons/ArtifactSlot/PlumeIcon\";\r\nimport SandsIcon from \"../../SVGIcons/ArtifactSlot/SandsIcon\";\r\n\r\nexport default function SlotIcon({ slotKey, iconProps = {} }: { slotKey: SlotKey, iconProps?: SvgIconProps }) {\r\n  switch (slotKey) {\r\n    case \"flower\":\r\n      return <FlowerIcon {...iconProps} />\r\n    case \"plume\":\r\n      return <PlumeIcon {...iconProps} />\r\n    case \"sands\":\r\n      return <SandsIcon {...iconProps} />\r\n    case \"goblet\":\r\n      return <GobletIcon {...iconProps} />\r\n    case \"circlet\":\r\n      return <CircletIcon {...iconProps} />\r\n  }\r\n}\r\n","import { weaponAsset } from '@genshin-optimizer/g-assets';\r\nimport { Box, Typography } from '@mui/material';\r\nimport { useMemo } from 'react';\r\nimport { getWeaponSheet } from '../../Data/Weapons';\r\nimport WeaponSheet from '../../Data/Weapons/WeaponSheet';\r\nimport { uiInput as input } from '../../Formula';\r\nimport { computeUIData, dataObjForWeapon } from '../../Formula/api';\r\nimport { NodeDisplay, nodeVStr } from '../../Formula/uiData';\r\nimport useWeapon from '../../ReactHooks/useWeapon';\r\nimport { ICachedWeapon } from '../../Types/weapon';\r\nimport CardDark from '../Card/CardDark';\r\nimport SqBadge from '../SqBadge';\r\n\r\nexport default function WeaponFullCard({ weaponId }: { weaponId: string }) {\r\n  const weapon = useWeapon(weaponId)\r\n  const weaponSheet = weapon?.key && getWeaponSheet(weapon.key)\r\n  const UIData = useMemo(() => weaponSheet && weapon && computeUIData([weaponSheet.data, dataObjForWeapon(weapon)]), [weaponSheet, weapon])\r\n  if (!weapon || !weaponSheet || !UIData) return null;\r\n  return <CardDark>\r\n    <Box display=\"flex\" >\r\n      <Box flexShrink={1} maxWidth=\"35%\" display=\"flex\" flexDirection=\"column\" alignContent=\"flex-end\" className={`grad-${weaponSheet.rarity}star`} >\r\n        <Box\r\n          component=\"img\"\r\n          src={weaponAsset(weapon.key, weapon.ascension >= 2)}\r\n          width=\"100%\"\r\n          height=\"auto\"\r\n          sx={{ mt: \"auto\" }}\r\n        />\r\n      </Box>\r\n      <Box flexGrow={1} sx={{ p: 1 }}>\r\n        <Typography variant=\"body2\" gutterBottom><strong>{weaponSheet?.name}</strong></Typography>\r\n        <Typography variant='subtitle1' sx={{ display: \"flex\", gap: 1 }} gutterBottom>\r\n          <SqBadge color=\"primary\">Lv. {WeaponSheet.getLevelString(weapon as ICachedWeapon)}</SqBadge>\r\n          {weaponSheet.hasRefinement && <SqBadge color=\"info\">R{weapon.refinement}</SqBadge>}\r\n        </Typography>\r\n        <Typography variant='subtitle1' sx={{ display: \"flex\", gap: 1 }} >\r\n          <WeaponStat node={UIData.get(input.weapon.main)} />\r\n          <WeaponStat node={UIData.get(input.weapon.sub)} />\r\n        </Typography>\r\n\r\n      </Box>\r\n    </Box>\r\n  </CardDark>\r\n}\r\nfunction WeaponStat({ node }: { node: NodeDisplay }) {\r\n  return <SqBadge color=\"secondary\">{node.info.icon} {nodeVStr(node)}</SqBadge>\r\n}\r\n","import { characterAsset } from '@genshin-optimizer/g-assets';\r\nimport { Favorite, FavoriteBorder } from '@mui/icons-material';\r\nimport { Box, CardActionArea, CardContent, Chip, Grid, IconButton, Skeleton, Typography } from '@mui/material';\r\nimport { Suspense, useCallback, useContext, useMemo } from 'react';\r\nimport { CharacterContext, CharacterContextObj } from '../../Context/CharacterContext';\r\nimport { DataContext, dataContextObj, TeamData } from '../../Context/DataContext';\r\nimport { getCharSheet } from '../../Data/Characters';\r\nimport { ascensionMaxLevel } from '../../Data/LevelData';\r\nimport { DatabaseContext } from '../../Database/Database';\r\nimport { uiInput as input } from '../../Formula';\r\nimport useCharacter from '../../ReactHooks/useCharacter';\r\nimport useCharacterReducer from '../../ReactHooks/useCharacterReducer';\r\nimport useCharMeta from '../../ReactHooks/useCharMeta';\r\nimport useDBMeta from '../../ReactHooks/useDBMeta';\r\nimport useTeamData from '../../ReactHooks/useTeamData';\r\nimport { ICachedArtifact } from '../../Types/artifact';\r\nimport { ICachedCharacter } from '../../Types/character';\r\nimport { allSlotKeys, CharacterKey, ElementKey, SlotKey } from '@genshin-optimizer/consts';\r\nimport { range } from '../../Util/Util';\r\nimport ArtifactCardPico from '../Artifact/ArtifactCardPico';\r\nimport CardLight from '../Card/CardLight';\r\nimport ConditionalWrapper from '../ConditionalWrapper';\r\nimport { NodeFieldDisplay } from '../FieldDisplay';\r\nimport SqBadge from '../SqBadge';\r\nimport { StarsDisplay } from '../StarDisplay';\r\nimport WeaponCardPico from '../Weapon/WeaponCardPico';\r\nimport WeaponFullCard from '../Weapon/WeaponFullCard';\r\nimport CharacterCardPico from './CharacterCardPico';\r\n\r\ntype CharacterCardProps = {\r\n  characterKey: CharacterKey,\r\n  onClick?: (characterKey: CharacterKey) => void,\r\n  onClickHeader?: (characterKey: CharacterKey) => void,\r\n  onClickTeammate?: (characterKey: CharacterKey) => void,\r\n  artifactChildren?: Displayable,\r\n  weaponChildren?: Displayable,\r\n  characterChildren?: Displayable,\r\n  footer?: Displayable,\r\n  hideStats?: boolean\r\n  isTeammateCard?: boolean,\r\n}\r\nexport default function CharacterCard({ characterKey, artifactChildren, weaponChildren, characterChildren, onClick, onClickHeader, onClickTeammate, footer, hideStats, isTeammateCard }: CharacterCardProps) {\r\n  const { database } = useContext(DatabaseContext)\r\n  const { teamData: teamDataContext } = useContext(DataContext)\r\n  const teamData = useTeamData(teamDataContext ? \"\" : characterKey) ?? (teamDataContext as TeamData | undefined)\r\n  const character = useCharacter(characterKey)\r\n  const { gender } = useDBMeta()\r\n  const characterSheet = getCharSheet(characterKey, gender)\r\n  const characterDispatch = useCharacterReducer(characterKey)\r\n  const data = teamData?.[characterKey]?.target\r\n  const onClickHandler = useCallback(() => characterKey && onClick?.(characterKey), [characterKey, onClick])\r\n  const actionWrapperFunc = useCallback(\r\n    children => <CardActionArea onClick={onClickHandler} sx={{ flexGrow: 1, display: \"flex\", flexDirection: \"column\" }}>{children}</CardActionArea>,\r\n    [onClickHandler],\r\n  )\r\n\r\n  const characterContextObj: CharacterContextObj | undefined = useMemo(() => character && characterSheet && {\r\n    character, characterSheet, characterDispatch\r\n  }, [character, characterSheet, characterDispatch])\r\n  const dataContextObj: dataContextObj | undefined = useMemo(() => data && teamData && ({\r\n    data,\r\n    teamData,\r\n  }), [data, teamData])\r\n\r\n  const { favorite } = useCharMeta(characterKey)\r\n  return <Suspense fallback={<Skeleton variant=\"rectangular\" width=\"100%\" height={600} />}>\r\n    <CardLight sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n      <Box sx={{ display: \"flex\", position: \"absolute\", zIndex: 2, opacity: 0.7 }}>\r\n        <IconButton sx={{ p: 0.5 }} onClick={_ => database.charMeta.set(characterKey, { favorite: !favorite })}>\r\n          {favorite ? <Favorite /> : <FavoriteBorder />}\r\n        </IconButton>\r\n      </Box>\r\n      <ConditionalWrapper condition={!!onClick} wrapper={actionWrapperFunc} >\r\n        {(character && dataContextObj && characterContextObj) ?\r\n          <ExistingCharacterCardContent\r\n            characterContextObj={characterContextObj}\r\n            dataContextObj={dataContextObj}\r\n            characterKey={characterKey}\r\n            onClick={onClick}\r\n            onClickHeader={onClickHeader}\r\n            isTeammateCard={isTeammateCard}\r\n            character={character}\r\n            onClickTeammate={onClickTeammate}\r\n            hideStats={hideStats}\r\n            weaponChildren={weaponChildren}\r\n            artifactChildren={artifactChildren}\r\n            characterChildren={characterChildren}\r\n          /> : <NewCharacterCardContent characterKey={characterKey} />}\r\n      </ConditionalWrapper>\r\n      {footer}\r\n    </CardLight>\r\n\r\n  </Suspense>\r\n}\r\n\r\ntype ExistingCharacterCardContentProps = {\r\n  characterContextObj: CharacterContextObj\r\n  dataContextObj: dataContextObj\r\n  characterKey: CharacterKey\r\n  onClick?: (characterKey: CharacterKey) => void\r\n  onClickHeader?: (characterKey: CharacterKey) => void\r\n  isTeammateCard?: boolean\r\n  character: ICachedCharacter\r\n  onClickTeammate?: (characterKey: CharacterKey) => void\r\n  hideStats?: boolean\r\n  weaponChildren?: Displayable\r\n  artifactChildren?: Displayable\r\n  characterChildren?: Displayable\r\n}\r\nfunction ExistingCharacterCardContent({ characterContextObj, dataContextObj, characterKey, onClick, onClickHeader, isTeammateCard, character, onClickTeammate, hideStats, weaponChildren, artifactChildren, characterChildren }: ExistingCharacterCardContentProps) {\r\n  return <CharacterContext.Provider value={characterContextObj}><DataContext.Provider value={dataContextObj}>\r\n    <Header characterKey={characterKey} onClick={!onClick ? onClickHeader : undefined} >\r\n      <HeaderContent />\r\n    </Header>\r\n    <CardContent sx={{ width: \"100%\", display: \"flex\", flexDirection: \"column\", gap: 1, flexGrow: 1 }}>\r\n      <Artifacts />\r\n      {!isTeammateCard && <Grid container columns={4} spacing={0.75}>\r\n        <Grid item xs={1} height=\"100%\">\r\n          <WeaponCardPico weaponId={character.equippedWeapon} />\r\n        </Grid>\r\n        {range(0, 2).map(i => <Grid key={i} item xs={1} height=\"100%\"><CharacterCardPico characterKey={character.team[i]} onClick={!onClick ? onClickTeammate : undefined} index={i} /></Grid>)}\r\n      </Grid>}\r\n      {isTeammateCard && <WeaponFullCard weaponId={character.equippedWeapon} />}\r\n      {!isTeammateCard && !hideStats && <Stats />}\r\n      {weaponChildren}\r\n      {artifactChildren}\r\n      {characterChildren}\r\n    </CardContent>\r\n  </DataContext.Provider></CharacterContext.Provider>\r\n}\r\n\r\nfunction NewCharacterCardContent({ characterKey }: { characterKey: CharacterKey }) {\r\n  return < >\r\n    <Header characterKey={characterKey} >\r\n      <HeaderContentNew characterKey={characterKey} />\r\n    </Header>\r\n    <CardContent sx={{ width: \"100%\", display: \"flex\", flexDirection: \"column\", gap: 1, flexGrow: 1, height: \"100%\" }}>\r\n    </CardContent>\r\n  </>\r\n}\r\n\r\nfunction Header({ children, characterKey, onClick }: { children: JSX.Element, characterKey: CharacterKey, onClick?: (characterKey: CharacterKey) => void }) {\r\n  const { gender } = useDBMeta()\r\n  const characterSheet = getCharSheet(characterKey, gender)\r\n\r\n  const actionWrapperFunc = useCallback(\r\n    children => <CardActionArea onClick={() => characterKey && onClick?.(characterKey)} sx={{ flexGrow: 1, display: \"flex\", flexDirection: \"column\" }}>{children}</CardActionArea>,\r\n    [onClick, characterKey],\r\n  )\r\n  if (!characterSheet) return null\r\n  return <ConditionalWrapper condition={!!onClick} wrapper={actionWrapperFunc} >\r\n    <Box display=\"flex\"\r\n      position=\"relative\"\r\n      className={`grad-${characterSheet.rarity}star`}\r\n      sx={{\r\n        \"&::before\": {\r\n          content: '\"\"',\r\n          display: \"block\", position: \"absolute\",\r\n          left: 0, top: 0,\r\n          width: \"100%\", height: \"100%\",\r\n          opacity: 0.7,\r\n          backgroundImage: `url(${characterAsset(characterKey, \"banner\", gender)})`,\r\n          backgroundPosition: \"center\",\r\n          backgroundSize: \"cover\",\r\n        }\r\n      }}\r\n      width=\"100%\" >\r\n      <Box flexShrink={1} sx={{ maxWidth: { xs: \"40%\", lg: \"40%\" } }} alignSelf=\"flex-end\" display=\"flex\" flexDirection=\"column\" zIndex={1}>\r\n        <Box\r\n          component=\"img\"\r\n          src={characterAsset(characterKey, \"icon\", gender)}\r\n          width=\"100%\"\r\n          height=\"auto\"\r\n          maxWidth={256}\r\n          sx={{ mt: \"auto\" }}\r\n        />\r\n      </Box>\r\n      <Box flexGrow={1} sx={{ py: 1, pr: 1 }} display=\"flex\" flexDirection=\"column\" zIndex={1}>\r\n        {children}\r\n      </Box>\r\n    </Box>\r\n  </ConditionalWrapper>\r\n}\r\n\r\nfunction HeaderContent() {\r\n  const { characterSheet } = useContext(CharacterContext)\r\n  const { data } = useContext(DataContext)\r\n  const characterEle = data.get(input.charEle).value as ElementKey\r\n  const characterLevel = data.get(input.lvl).value\r\n  const constellation = data.get(input.constellation).value\r\n  const ascension = data.get(input.asc).value\r\n  const autoBoost = data.get(input.bonus.auto).value\r\n  const skillBoost = data.get(input.bonus.skill).value\r\n  const burstBoost = data.get(input.bonus.burst).value\r\n\r\n  const tAuto = data.get(input.total.auto).value\r\n  const tSkill = data.get(input.total.skill).value\r\n  const tBurst = data.get(input.total.burst).value\r\n\r\n  return <>\r\n    <Chip label={<Typography variant=\"subtitle1\">{characterSheet.name}</Typography>} size=\"small\" color={characterEle} sx={{ opacity: 0.85 }} />\r\n    <Grid container spacing={1} flexWrap=\"nowrap\">\r\n      <Grid item sx={{ textShadow: \"0 0 5px gray\" }}>\r\n        <Typography component=\"span\" variant=\"h6\" whiteSpace=\"nowrap\" >Lv. {characterLevel}</Typography>\r\n        <Typography component=\"span\" variant=\"h6\" color=\"text.secondary\">/{ascensionMaxLevel[ascension]}</Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography variant=\"h6\"><SqBadge>C{constellation}</SqBadge></Typography>\r\n      </Grid>\r\n    </Grid>\r\n    <Grid container spacing={1} flexWrap=\"nowrap\">\r\n      <Grid item>\r\n        <Chip color={autoBoost ? \"info\" : \"secondary\"} label={<strong >{tAuto}</strong>} />\r\n      </Grid>\r\n      <Grid item>\r\n        <Chip color={skillBoost ? \"info\" : \"secondary\"} label={<strong >{tSkill}</strong>} />\r\n      </Grid>\r\n      <Grid item>\r\n        <Chip color={burstBoost ? \"info\" : \"secondary\"} label={<strong >{tBurst}</strong>} />\r\n      </Grid>\r\n    </Grid>\r\n    <Typography mt={1} ><StarsDisplay stars={characterSheet.rarity} colored /></Typography>\r\n\r\n  </>\r\n}\r\n\r\nfunction HeaderContentNew({ characterKey }: { characterKey: CharacterKey }) {\r\n  const { gender } = useDBMeta()\r\n  const sheet = getCharSheet(characterKey, gender)\r\n\r\n  if (!sheet) return null\r\n  return <>\r\n    <Chip label={<Typography variant=\"subtitle1\">{sheet.name}</Typography>} size=\"small\" color={sheet.elementKey} sx={{ opacity: 0.85 }} />\r\n    <Box mt={1}>\r\n      <Typography variant=\"h4\"><SqBadge>NEW</SqBadge></Typography>\r\n    </Box>\r\n    <Typography mt={1.5} ><StarsDisplay stars={sheet.rarity} colored /></Typography>\r\n  </>\r\n}\r\n\r\nfunction Artifacts() {\r\n  const { database } = useContext(DatabaseContext)\r\n  const { data } = useContext(DataContext)\r\n  const artifacts = useMemo(() =>\r\n    allSlotKeys.map(k => [k, database.arts.get(data.get(input.art[k].id).value ?? \"\")]),\r\n    [data, database]) as Array<[SlotKey, ICachedArtifact | undefined]>;\r\n\r\n  return <Grid direction=\"row\" container spacing={0.75} columns={5}>\r\n    {artifacts.map(([key, art]: [SlotKey, ICachedArtifact | undefined]) =>\r\n      <Grid item key={key} xs={1}>\r\n        <ArtifactCardPico artifactObj={art} slotKey={key} />\r\n      </Grid>\r\n    )}\r\n  </Grid>\r\n}\r\n\r\nfunction Stats() {\r\n  const { data } = useContext(DataContext)\r\n  return <Box sx={{ width: \"100%\" }} >\r\n    {Object.values(data.getDisplay().basic).map(n => <NodeFieldDisplay key={JSON.stringify(n.info)} node={n} />)}\r\n    {data.get(input.special).info.name && <Box sx={{ display: \"flex\", gap: 1, alignItems: \"center\" }} >\r\n      <Typography flexGrow={1}><strong>Specialized:</strong></Typography>\r\n      {data.get(input.special).info.icon}\r\n      <Typography>{data.get(input.special).info.name}</Typography>\r\n    </Box>}\r\n  </Box>\r\n}\r\n","import { CharacterKey } from '@genshin-optimizer/consts';\r\nimport { characterAsset } from '@genshin-optimizer/g-assets';\r\nimport { Box, CardActionArea, Skeleton, Typography } from '@mui/material';\r\nimport { Suspense, useCallback } from 'react';\r\nimport Assets from '../../Assets/Assets';\r\nimport { getCharSheet } from '../../Data/Characters';\r\nimport { ascensionMaxLevel } from '../../Data/LevelData';\r\nimport { ElementIcon } from '../../KeyMap/StatIcon';\r\nimport useCharacter from '../../ReactHooks/useCharacter';\r\nimport useDBMeta from '../../ReactHooks/useDBMeta';\r\nimport BootstrapTooltip from '../BootstrapTooltip';\r\nimport CardDark from '../Card/CardDark';\r\nimport ConditionalWrapper from '../ConditionalWrapper';\r\nimport SqBadge from '../SqBadge';\r\n\r\nexport default function CharacterCardPico({ characterKey = \"\", index = -1, onClick }: { characterKey: CharacterKey | \"\", index?: number, onClick?: (characterKey: CharacterKey) => void }) {\r\n  const { gender } = useDBMeta()\r\n  const teammateSheet = characterKey ? getCharSheet(characterKey, gender) : undefined\r\n  const character = useCharacter(characterKey)\r\n  const onClickHandler = useCallback(() => characterKey && onClick?.(characterKey), [characterKey, onClick])\r\n  const actionWrapperFunc = useCallback(\r\n    children => <CardActionArea onClick={onClickHandler}>{children}</CardActionArea>,\r\n    [onClickHandler])\r\n  if (teammateSheet && character) {\r\n    const title = <Suspense fallback={<Skeleton variant=\"text\" width={100} />}>\r\n      <Typography>\r\n        {teammateSheet.elementKey && <ElementIcon ele={teammateSheet.elementKey} iconProps={{\r\n          fontSize: \"inherit\",\r\n          sx: {\r\n            verticalAlign: \"-10%\",\r\n            color: `${teammateSheet.elementKey}.main`\r\n          }\r\n        }} />} {teammateSheet.name}\r\n      </Typography>\r\n    </Suspense>\r\n\r\n    return <CardDark sx={{ maxWidth: 128, position: \"relative\", display: \"flex\", flexDirection: \"column\", }}>\r\n      <ConditionalWrapper condition={!!onClick} wrapper={actionWrapperFunc}>\r\n        <BootstrapTooltip placement=\"top\" title={title}>\r\n          <Box display=\"flex\" className={`grad-${teammateSheet.rarity}star`}>\r\n            {characterKey && <Box\r\n              component=\"img\"\r\n              src={characterAsset(characterKey, \"iconSide\", gender)}\r\n              maxWidth=\"100%\"\r\n              maxHeight=\"100%\"\r\n              sx={{ transform: \"scale(1.4)\", transformOrigin: \"bottom\" }}\r\n            />}\r\n          </Box>\r\n        </BootstrapTooltip>\r\n        <Typography sx={{ position: \"absolute\", fontSize: \"0.75rem\", lineHeight: 1, opacity: 0.85, pointerEvents: \"none\", top: 0, }}>\r\n          <strong><SqBadge color=\"primary\" >{character.level}/{ascensionMaxLevel[character.ascension]}</SqBadge></strong>\r\n        </Typography>\r\n        <Typography sx={{ position: \"absolute\", fontSize: \"0.75rem\", lineHeight: 1, opacity: 0.85, pointerEvents: \"none\", bottom: 0, right: 0, }}>\r\n          <strong><SqBadge color=\"secondary\" >C{character.constellation}</SqBadge></strong>\r\n        </Typography>\r\n      </ConditionalWrapper>\r\n    </CardDark>\r\n  } else {\r\n    return <CardDark sx={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", py: \"12.5%\" }}>\r\n      <Box component=\"img\" src={Assets.team[`team${index + 2}`]} sx={{ width: \"75%\", height: \"auto\", opacity: 0.7 }} />\r\n    </CardDark>\r\n  }\r\n}\r\n","import { Chip, ToggleButton, useMediaQuery, useTheme } from \"@mui/material\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport { allWeaponTypeKeys, WeaponTypeKey } from \"@genshin-optimizer/consts\";\r\nimport { handleMultiSelect } from \"../../Util/MultiSelect\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\nimport SolidToggleButtonGroup, { SolidToggleButtonGroupProps } from \"../SolidToggleButtonGroup\";\r\ntype WeaponToggleProps = Omit<SolidToggleButtonGroupProps, \"onChange\" | \"value\"> & {\r\n  onChange: (value: WeaponTypeKey[]) => void\r\n  value: WeaponTypeKey[],\r\n  totals: Record<WeaponTypeKey, Displayable>\r\n}\r\n\r\nconst weaponTypeHandler = handleMultiSelect([...allWeaponTypeKeys])\r\nexport default function WeaponToggle({ value, totals, onChange, ...props }: WeaponToggleProps) {\r\n  const theme = useTheme();\r\n  const xs = !useMediaQuery(theme.breakpoints.up('sm'));\r\n  return <SolidToggleButtonGroup exclusive value={value} {...props}>\r\n    {allWeaponTypeKeys.map(wt => <ToggleButton key={wt} value={wt} sx={{ p: xs ? 1 : undefined, minWidth: xs ? 0 : \"7em\", display: \"flex\", gap: xs ? 0 : 1 }} onClick={() => onChange(weaponTypeHandler(value, wt))}>\r\n      <ImgIcon src={Assets.weaponTypes?.[wt]} size={2} sideMargin /><Chip label={totals[wt]} size=\"small\" />\r\n    </ToggleButton>)}\r\n  </SolidToggleButtonGroup>\r\n}\r\n","import { weaponAsset } from '@genshin-optimizer/g-assets';\r\nimport { Box, Typography } from '@mui/material';\r\nimport { useMemo } from 'react';\r\nimport { getWeaponSheet } from '../../Data/Weapons';\r\nimport WeaponSheet from '../../Data/Weapons/WeaponSheet';\r\nimport { uiInput as input } from '../../Formula';\r\nimport { computeUIData, dataObjForWeapon } from '../../Formula/api';\r\nimport { NodeDisplay, nodeVStr } from '../../Formula/uiData';\r\nimport useWeapon from '../../ReactHooks/useWeapon';\r\nimport CardDark from '../Card/CardDark';\r\nimport SqBadge from '../SqBadge';\r\nimport WeaponNameTooltip from './WeaponNameTooltip';\r\n\r\nexport default function WeaponCardPico({ weaponId }: { weaponId: string }) {\r\n  const weapon = useWeapon(weaponId)\r\n  const weaponSheet = weapon?.key && getWeaponSheet(weapon.key)\r\n  const UIData = useMemo(() => weaponSheet && weapon && computeUIData([weaponSheet.data, dataObjForWeapon(weapon)]), [weaponSheet, weapon])\r\n  if (!weapon || !weaponSheet || !UIData) return null;\r\n\r\n  const tooltipAddl = <Box>\r\n    <WeaponStatPico node={UIData.get(input.weapon.main)} />\r\n    <WeaponStatPico node={UIData.get(input.weapon.sub)} />\r\n  </Box>\r\n\r\n  return <CardDark sx={{ height: \"100%\", maxWidth: 128, position: \"relative\", display: \"flex\", flexDirection: \"column\", }}>\r\n    <Box display=\"flex\" flexDirection=\"column\" alignContent=\"flex-end\" className={`grad-${weaponSheet.rarity}star`}>\r\n      <WeaponNameTooltip sheet={weaponSheet} addlText={tooltipAddl}>\r\n        <Box\r\n          component=\"img\"\r\n          src={weaponAsset(weapon.key, weapon.ascension >= 2)}\r\n          maxWidth=\"100%\"\r\n          maxHeight=\"100%\"\r\n          sx={{ mt: \"auto\" }}\r\n        />\r\n      </WeaponNameTooltip>\r\n    </Box>\r\n    <Typography sx={{ position: \"absolute\", fontSize: \"0.75rem\", lineHeight: 1, opacity: 0.85, pointerEvents: \"none\", }}>\r\n      <strong><SqBadge color=\"primary\">{WeaponSheet.getLevelString(weapon)}</SqBadge></strong>\r\n    </Typography>\r\n    {weaponSheet.hasRefinement && <Typography sx={{ position: \"absolute\", fontSize: \"0.75rem\", lineHeight: 1, opacity: 0.85, pointerEvents: \"none\", bottom: 0, right: 0, }}>\r\n      <strong><SqBadge color=\"secondary\">R{weapon.refinement}</SqBadge></strong>\r\n    </Typography>}\r\n  </CardDark>\r\n}\r\nfunction WeaponStatPico({ node }: { node: NodeDisplay }) {\r\n  return <Typography>{node.info.icon} {nodeVStr(node)}</Typography>\r\n}\r\n","import { Skeleton, Typography } from \"@mui/material\";\r\nimport { ReactElement, ReactNode, Suspense } from \"react\";\r\nimport Assets from \"../../Assets/Assets\";\r\nimport WeaponSheet from \"../../Data/Weapons/WeaponSheet\";\r\nimport BootstrapTooltip from \"../BootstrapTooltip\";\r\nimport ImgIcon from \"../Image/ImgIcon\";\r\n\r\ntype Data = {\r\n  sheet: WeaponSheet,\r\n  addlText?: any,\r\n  children: ReactElement<any, any> & ReactNode,\r\n}\r\nexport default function WeaponNameTooltip({ sheet, addlText, children }: Data) {\r\n  const title = <Suspense fallback={<Skeleton variant=\"text\" width={100} />}>\r\n    <Typography><ImgIcon src={Assets.weaponTypes[sheet.weaponType]} size={1.5} /> {sheet.name}</Typography>\r\n    {addlText}\r\n  </Suspense>\r\n  return <BootstrapTooltip placement=\"top\" title={title} disableInteractive>\r\n    {children}\r\n  </BootstrapTooltip>\r\n}\r\n","import { allElements, allElementsWithPhy } from \"@genshin-optimizer/consts\";\nimport ElementCycle from \"../Components/ElementCycle\";\nimport { Translate } from \"../Components/Translate\";\nimport { input, tally } from \"../Formula\";\nimport { inferInfoMut } from \"../Formula/api\";\nimport { UIData } from \"../Formula/uiData\";\nimport { equal, greaterEq, infoMut, percent, sum } from \"../Formula/utils\";\nimport KeyMap from \"../KeyMap\";\nimport { iconInlineProps } from \"../SVGIcons\";\nimport AnemoIcon from \"../SVGIcons/Element/AnemoIcon\";\nimport CryoIcon from \"../SVGIcons/Element/CryoIcon\";\nimport DendroIcon from \"../SVGIcons/Element/DendroIcon\";\nimport ElectroIcon from \"../SVGIcons/Element/ElectroIcon\";\nimport GeoIcon from \"../SVGIcons/Element/GeoIcon\";\nimport HydroIcon from \"../SVGIcons/Element/HydroIcon\";\nimport PyroIcon from \"../SVGIcons/Element/PyroIcon\";\nimport { DocumentSection } from \"../Types/sheet\";\nimport { objectKeyValueMap } from \"../Util/Util\";\nimport { condReadNode, st, stg } from \"./SheetUtil\";\nconst tr = (strKey: string) => <Translate ns=\"elementalResonance_gen\" key18={strKey} />\nconst trm = (strKey: string) => <Translate ns=\"elementalResonance\" key18={strKey} />\n\ntype IResonance = {\n  name: Displayable,\n  desc: Displayable,\n  icon: Displayable,\n  canShow: (data: UIData) => boolean\n  sections: DocumentSection[]\n}\n\nconst teamSize = sum(...allElements.map(ele => tally[ele]))\n\n// Protective Canopy\nconst pcNodes = objectKeyValueMap(allElementsWithPhy, e => [\n  `${e}_res_`,\n  equal(input.activeCharKey, input.charKey,\n    greaterEq(tally.ele, 4, percent(0.15))\n  )\n])\n\nconst protectiveCanopy: IResonance = {\n  name: tr(\"ProtectiveCanopy.name\"),\n  desc: tr(\"ProtectiveCanopy.desc\"),\n  icon: <span><ElementCycle iconProps={iconInlineProps} /> x4</span>,\n  canShow: (data: UIData) => allElements.filter(e => data.get(tally[e]).value >= 1).length === 4,\n  sections: [{\n    teamBuff: true,\n    fields: Object.values(pcNodes).map(node => ({ node }))\n  }]\n}\n\n// Fervent Flames\nconst ffNode = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.pyro, 2, percent(0.25))\n  )\n)\nconst ferventFlames: IResonance = {\n  name: tr(\"FerventFlames.name\"),\n  desc: tr(\"FerventFlames.desc\"),\n  icon: <span><PyroIcon {...iconInlineProps} /> <PyroIcon {...iconInlineProps} /></span>,\n  canShow: (data: UIData) => data.get(tally.pyro).value >= 2 && data.get(teamSize).value >= 4,\n  sections: [{\n    teamBuff: true,\n    fields: [{\n      text: st(\"effectDuration.cryo\"),\n      value: -40,\n      unit: \"%\"\n    }, {\n      node: ffNode\n    }]\n  }]\n}\n\n// Soothing Waters\nconst swNode = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.hydro, 2, percent(0.25))\n  )\n)\nconst soothingWaters: IResonance = {\n  name: tr(\"SoothingWater.name\"),\n  desc: tr(\"SoothingWater.desc\"),\n  icon: <span><HydroIcon {...iconInlineProps} /> <HydroIcon {...iconInlineProps} /></span>,\n  canShow: (data: UIData) => data.get(tally.hydro).value >= 2 && data.get(teamSize).value >= 4,\n  sections: [{\n    teamBuff: true,\n    fields: [{\n      text: st(\"effectDuration.pyro\"),\n      value: -40,\n      unit: \"%\"\n    }, {\n      node: swNode\n    }]\n  }]\n}\n\n//ShatteringIce\nconst condSIPath = [\"resonance\", \"ShatteringIce\"]\nconst condSI = condReadNode(condSIPath)\nconst siNode = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.cryo, 2,\n      equal(condSI, \"on\", percent(0.15))\n    )\n  )\n)\nconst shatteringIce: IResonance = {\n  name: tr(\"ShatteringIce.name\"),\n  desc: tr(\"ShatteringIce.desc\"),\n  icon: <span><CryoIcon {...iconInlineProps} /> <CryoIcon {...iconInlineProps} /></span>,\n  canShow: (data: UIData) => data.get(tally.cryo).value >= 2 && data.get(teamSize).value >= 4,\n  sections: [{\n    teamBuff: true,\n    fields: [{\n      text: st(\"effectDuration.electro\"),\n      value: -40,\n      unit: \"%\"\n    }]\n  }, {\n    teamBuff: true,\n    path: condSIPath,\n    value: condSI,\n    name: trm(\"ShatteringIce.cond\"),\n    header: {\n      title: tr(\"ShatteringIce.name\"),\n      icon: <CryoIcon />,\n    },\n    states: {\n      on: {\n        fields: [{\n          node: siNode\n        }]\n      }\n    }\n  }]\n}\n\n// High Voltage\nconst highVoltage: IResonance = {\n  name: tr(\"HighVoltage.name\"),\n  desc: tr(\"HighVoltage.desc\"),\n  icon: <span><ElectroIcon {...iconInlineProps} /> <ElectroIcon {...iconInlineProps} /></span>,\n  canShow: (data: UIData) => data.get(tally.electro).value >= 2 && data.get(teamSize).value >= 4,\n  sections: [{\n    teamBuff: true,\n    fields: [{\n      text: st(\"effectDuration.hydro\"),\n      value: -40,\n      unit: \"%\"\n    }]\n  }]\n}\n\n// Impetuous Winds\nconst iwNodeStam = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.anemo, 2, percent(-0.15))\n  )\n)\nconst iwNodeMove = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.anemo, 2, percent(0.1))\n  )\n)\nconst iwNodeCD = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.anemo, 2, percent(-0.05))\n  )\n)\nconst impetuousWinds: IResonance = {\n  name: tr(\"ImpetuousWinds.name\"),\n  desc: tr(\"ImpetuousWinds.desc\"),\n  icon: <span><AnemoIcon {...iconInlineProps} /> <AnemoIcon {...iconInlineProps} /></span>,\n  canShow: (data: UIData) => data.get(tally.anemo).value >= 2 && data.get(teamSize).value >= 4,\n  sections: [{\n    teamBuff: true,\n    fields: [{\n      node: iwNodeStam\n    }, {\n      node: iwNodeMove\n    }, {\n      node: iwNodeCD\n    }]\n  }]\n}\n\n// Enduring Rock\nconst condERShieldPath = [\"resonance\", \"EnduringRock\"]\nconst condERShield = condReadNode(condERShieldPath)\nconst condERHitPath = [\"resonance\", \"EnduringRockHit\"]\nconst condERHit = condReadNode(condERHitPath)\nconst erNodeshield_ = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.geo, 2, percent(0.15))\n  )\n)\nconst erNodeDMG_ = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.geo, 2,\n      equal(condERShield, \"on\", percent(0.15))\n    )\n  )\n)\nconst erNodeRes_ = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.geo, 2,\n      equal(condERHit, \"on\", percent(-0.2))\n    )\n  )\n)\nconst enduringRock: IResonance = {\n  name: tr(\"EnduringRock.name\"),\n  desc: tr(\"EnduringRock.desc\"),\n  icon: <span><GeoIcon {...iconInlineProps} /> <GeoIcon {...iconInlineProps} /></span>,\n  canShow: (data: UIData) => data.get(tally.geo).value >= 2 && data.get(teamSize).value >= 4,\n  sections: [{\n    teamBuff: true,\n    text: tr(\"EnduringRock.desc\"),\n    fields: [{\n      node: erNodeshield_\n    }]\n  }, {\n    teamBuff: true,\n    path: condERShieldPath,\n    value: condERShield,\n    header: {\n      title: tr(\"EnduringRock.name\"),\n      icon: <GeoIcon />,\n    },\n    name: st(\"protectedByShield\"),\n    states: {\n      on: {\n        fields: [{\n          node: erNodeDMG_\n        }]\n      }\n    }\n  }, {\n    teamBuff: true,\n    path: condERHitPath,\n    value: condERHit,\n    header: {\n      title: tr(\"EnduringRock.name\"),\n      icon: <GeoIcon />,\n    },\n    name: trm(\"EnduringRock.hitCond\"),\n    states: {\n      on: {\n        fields: [{\n          node: erNodeRes_\n        }, {\n          text: stg(\"duration\"),\n          value: 15,\n          unit: \"s\"\n        }]\n      }\n    }\n  }]\n}\n\n// Sprawling Greenery\nconst condSG2elePath = [\"resonance\", \"SprawlingCanopy2ele\"]\nconst condSG2ele = condReadNode(condSG2elePath)\nconst condSG3elePath = [\"resonance\", \"SprawlingCanopy3ele\"]\nconst condSG3ele = condReadNode(condSG3elePath)\nconst sgBase_eleMas = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.dendro, 2, 50, { ...KeyMap.info(\"eleMas\"), isTeamBuff: true })\n  )\n)\nconst sg2ele_eleMas = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.dendro, 2,\n      equal(condSG2ele, \"on\", 30, { ...KeyMap.info(\"eleMas\"), isTeamBuff: true })\n    )\n  )\n)\nconst sg3ele_eleMas = equal(input.activeCharKey, input.charKey,\n  greaterEq(teamSize, 4,\n    greaterEq(tally.dendro, 2,\n      equal(condSG3ele, \"on\", 20, { ...KeyMap.info(\"eleMas\"), isTeamBuff: true })\n    )\n  )\n)\nconst sprawlingGreenery: IResonance = {\n  name: tr(\"SprawlingGreenery.name\"),\n  desc: tr(\"SprawlingGreenery.desc\"),\n  icon: <span><DendroIcon {...iconInlineProps} /> <DendroIcon {...iconInlineProps} /></span>,\n  canShow: (data: UIData) => data.get(tally.dendro).value >= 2 && data.get(teamSize).value >= 4,\n  sections: [{\n    teamBuff: true,\n    text: tr(\"SprawlingGreenery.desc\"),\n    fields: [{ node: sgBase_eleMas }]\n  }, {\n    teamBuff: true,\n    path: condSG2elePath,\n    value: condSG2ele,\n    header: {\n      title: tr(\"SprawlingGreenery.name\"),\n      icon: <DendroIcon />,\n    },\n    name: trm(\"SprawlingGreenery.cond2ele\"),\n    states: {\n      on: {\n        fields: [{\n          node: sg2ele_eleMas\n        }, {\n          text: stg(\"duration\"),\n          value: 6,\n          unit: \"s\"\n        }]\n      }\n    }\n  }, {\n    teamBuff: true,\n    path: condSG3elePath,\n    value: condSG3ele,\n    header: {\n      title: tr(\"SprawlingGreenery.name\"),\n      icon: <DendroIcon />,\n    },\n    name: trm(\"SprawlingGreenery.cond3ele\"),\n    states: {\n      on: {\n        fields: [{\n          node: sg3ele_eleMas\n        }, {\n          text: stg(\"duration\"),\n          value: 6,\n          unit: \"s\"\n        }]\n      }\n    }\n  }]\n}\n\n\nexport const resonanceSheets: IResonance[] = [\n  protectiveCanopy,\n  ferventFlames,\n  soothingWaters,\n  shatteringIce,\n  highVoltage,\n  impetuousWinds,\n  enduringRock,\n  sprawlingGreenery,\n]\n\nexport const resonanceData = inferInfoMut({\n  teamBuff: {\n    premod: {\n      ...pcNodes,\n      atk_: ffNode,\n      hp_: swNode,\n      staminaDec_: iwNodeStam,\n      moveSPD_: iwNodeMove,\n      cdRed_: iwNodeCD,\n      shield_: erNodeshield_,\n      all_dmg_: erNodeDMG_,\n      geo_enemyRes_: erNodeRes_,\n      eleMas: infoMut(sum(sgBase_eleMas, sg2ele_eleMas, sg3ele_eleMas), { pivot: true }),\n    },\n    total: {\n      // TODO: this crit rate is on-hit. Might put it in a `hit.critRate_` namespace later.\n      critRate_: siNode\n    }\n  }\n})\n","import { allElements } from \"@genshin-optimizer/consts\";\r\nimport { SvgIconProps } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ElementIcon } from \"../KeyMap/StatIcon\";\r\n\r\nexport default function ElementCycle({ iconProps }: { iconProps: SvgIconProps }) {\r\n  const [counter, setcounter] = useState(0)\r\n  useEffect(() => {\r\n    const timer = setInterval(() => setcounter(c => c + 1), 1000)\r\n    return () => clearInterval(timer)\r\n  }, [])\r\n  return <ElementIcon ele={allElements[counter % allElements.length]} iconProps={iconProps} />\r\n}\r\n","import { useContext, useEffect, useState } from \"react\"\r\nimport { DatabaseContext } from \"../Database/Database\"\r\nimport { CharacterKey } from \"../Types/consts\"\r\n\r\nexport default function useCharMeta(key: CharacterKey) {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [charMeta, setCharMetaState] = useState(() => database.charMeta.get(key))\r\n  useEffect(() => database.charMeta.follow(key, (k, r, dbMeta) => setCharMetaState(dbMeta)), [key, database])\r\n  useEffect(() => setCharMetaState(database.charMeta.get(key)), [database, key])\r\n  return charMeta\r\n}\r\n","import { CharacterKey } from \"@genshin-optimizer/consts\";\nimport { useCallback, useContext } from \"react\";\nimport { useMatch, useNavigate } from \"react-router-dom\";\nimport { DatabaseContext } from \"../Database/Database\";\n\n/**\n * Basically a history hook to go to the dedicated character page. Will create the character if it doesn't exist.\n * @returns\n */\nexport default function useCharSelectionCallback() {\n  const { database } = useContext(DatabaseContext)\n  const navigate = useNavigate()\n  // Used to maintain the previous tab, if there is one\n  const { params: { tab = \"\" } } = useMatch({ path: \"/characters/:charKey/:tab\", end: false }) ?? { params: { tab: \"\" } }\n  const cb = useCallback((characterKey: CharacterKey) => {\n    const character = database.chars.get(characterKey)\n    let navTab = tab\n    // Create a new character + weapon, with linking if char isnt in db.\n    if (!character) {\n      database.chars.getWithInitWeapon(characterKey)\n      // If we are navigating to a new character,\n      // redirect to Overview, regardless of previous tab.\n      // Trying to enforce a certain UI flow when building new characters\n      navTab = \"\"\n    }\n    navigate(`/characters/${characterKey}/${navTab}`)\n  }, [navigate, database, tab])\n  return cb\n}\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\nimport { CharacterKey } from \"../Types/consts\";\r\n\r\nexport default function useCharacter(characterKey: CharacterKey | \"\" | undefined = \"\") {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [character, updateCharacter] = useState(database.chars.get(characterKey))\r\n  useEffect(() => updateCharacter(database.chars.get(characterKey)), [database, characterKey])\r\n  useEffect(() =>\r\n    characterKey ? database.chars.follow(characterKey, (k, r, v) => r === \"update\" && updateCharacter(v)) : undefined,\r\n    [characterKey, updateCharacter, database])\r\n  return character\r\n}\r\n","import { useCallback, useContext } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\nimport { ICachedCharacter } from \"../Types/character\";\r\nimport { CharacterKey } from \"../Types/consts\";\r\nimport { IConditionalValues } from \"../Types/sheet\";\r\nimport { deepClone } from \"../Util/Util\";\r\n\r\ntype characterReducerBonusStatsAction = {\r\n  type: \"editStats\",\r\n  statKey: string\r\n  value: any | undefined\r\n}\r\ntype characterReducerenemyOverrideAction = {\r\n  type: \"enemyOverride\",\r\n  statKey: string\r\n  value: any | undefined\r\n}\r\ntype characterReducerResetStatsAction = {\r\n  type: \"resetStats\",\r\n  statKey: string\r\n}\r\ntype characterTeamAction = {\r\n  type: \"team\",\r\n  index: number,\r\n  charKey: CharacterKey | \"\"\r\n}\r\ntype characterTeamConditional = {\r\n  type: \"teamConditional\",\r\n  teamMateKey: CharacterKey,\r\n  conditional: IConditionalValues\r\n}\r\nexport type characterReducerAction = characterReducerBonusStatsAction | characterReducerenemyOverrideAction | characterReducerResetStatsAction | characterTeamAction | characterTeamConditional | Partial<ICachedCharacter>\r\n\r\nexport default function useCharacterReducer(characterKey: CharacterKey | \"\") {\r\n\r\n  const { database } = useContext(DatabaseContext)\r\n\r\n  return useCallback((action: characterReducerAction): void => {\r\n    if (!characterKey) return\r\n    const character = database.chars.get(characterKey)\r\n    if (!character) return\r\n    if (\"type\" in action) switch (action.type) {\r\n      case \"enemyOverride\": {\r\n        const enemyOverride = character.enemyOverride\r\n        const { statKey, value } = action\r\n        if (enemyOverride[statKey] === value) break\r\n        database.chars.set(characterKey, { ...character, enemyOverride: { ...enemyOverride, [statKey]: value } })\r\n        break\r\n      }\r\n      case \"editStats\": {\r\n        const { statKey, value } = action\r\n        const bonusStats = deepClone(character.bonusStats)\r\n        if (bonusStats[statKey] === value) break\r\n        if (!value) delete bonusStats[statKey]\r\n        else bonusStats[statKey] = value\r\n        database.chars.set(characterKey, { ...character, bonusStats })\r\n        break\r\n      }\r\n      case \"resetStats\": {\r\n        const { statKey } = action\r\n        const bonusStats = character.bonusStats\r\n        delete bonusStats[statKey]\r\n        database.chars.set(characterKey, { ...character, bonusStats })\r\n        break\r\n      }\r\n      case \"teamConditional\": {\r\n        const { teamMateKey, conditional } = action\r\n        const teamConditional = deepClone(character.teamConditional)\r\n        teamConditional[teamMateKey] = conditional\r\n        database.chars.set(characterKey, { ...character, teamConditional })\r\n        break\r\n      }\r\n      case \"team\": {\r\n        const { team: team_ } = character\r\n        const team = [...team_] as ICachedCharacter[\"team\"]\r\n        const { index, charKey } = action\r\n        team[index] = charKey\r\n        // update src character\r\n        database.chars.set(characterKey, { ...character, team })\r\n      }\r\n    } else\r\n      database.chars.set(characterKey, { ...character, ...action })\r\n  }, [characterKey, database])\r\n}\r\n","import { useContext, useDeferredValue, useEffect, useMemo } from \"react\";\r\nimport { TeamData } from \"../Context/DataContext\";\r\nimport { allArtifactData } from \"../Data/Artifacts\";\r\nimport { getCharSheet } from \"../Data/Characters\";\r\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\";\r\nimport { resonanceData } from \"../Data/Resonance\";\r\nimport { getWeaponSheet } from \"../Data/Weapons\";\r\nimport WeaponSheet from \"../Data/Weapons/WeaponSheet\";\r\nimport { ArtCharDatabase, DatabaseContext } from \"../Database/Database\";\r\nimport { common } from \"../Formula\";\r\nimport { dataObjForArtifact, dataObjForCharacter, dataObjForWeapon, mergeData, uiDataForTeam } from \"../Formula/api\";\r\nimport { Data } from \"../Formula/type\";\r\nimport { ICachedArtifact } from \"../Types/artifact\";\r\nimport { ICachedCharacter } from \"../Types/character\";\r\nimport { CharacterKey, Gender } from \"../Types/consts\";\r\nimport { ICachedWeapon } from \"../Types/weapon\";\r\nimport { objectMap } from \"../Util/Util\";\r\nimport { defaultInitialWeapon } from \"../Util/WeaponUtil\";\r\nimport useDBMeta from \"./useDBMeta\";\r\nimport useForceUpdate from \"./useForceUpdate\";\r\n\r\ntype TeamDataBundle = {\r\n  teamData: Dict<CharacterKey, Data[]>\r\n  teamBundle: Dict<CharacterKey, CharBundle>\r\n}\r\n\r\nexport default function useTeamData(characterKey: CharacterKey | \"\", mainStatAssumptionLevel = 0, overrideArt?: ICachedArtifact[] | Data, overrideWeapon?: ICachedWeapon): TeamData | undefined {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [dbDirty, setDbDirty] = useForceUpdate()\r\n  const dbDirtyDeferred = useDeferredValue(dbDirty)\r\n  const { gender } = useDBMeta()\r\n  const data = useMemo(() => dbDirtyDeferred && getTeamDataCalc(database, characterKey, mainStatAssumptionLevel, gender, overrideArt, overrideWeapon), [dbDirtyDeferred, gender, characterKey, database, mainStatAssumptionLevel, overrideArt, overrideWeapon])\r\n\r\n  useEffect(() =>\r\n    characterKey ? database.chars.follow(characterKey, setDbDirty) : undefined,\r\n    [characterKey, setDbDirty, database])\r\n\r\n  return data\r\n}\r\n\r\nfunction getTeamDataCalc(database: ArtCharDatabase, characterKey: CharacterKey | \"\", mainStatAssumptionLevel = 0, gender: Gender, overrideArt?: ICachedArtifact[] | Data, overrideWeapon?: ICachedWeapon):\r\n  TeamData | undefined {\r\n  if (!characterKey) return\r\n\r\n  // Retrive from cache\r\n  if (!mainStatAssumptionLevel && !overrideArt && !overrideWeapon) {\r\n    const cache = database._getTeamData(characterKey)\r\n    if (cache) return cache\r\n  }\r\n  const { teamData, teamBundle } = getTeamData(database, characterKey, mainStatAssumptionLevel, overrideArt, overrideWeapon) ?? {}\r\n  if (!teamData || !teamBundle) return\r\n\r\n  const calcData = uiDataForTeam(teamData, gender, characterKey)\r\n\r\n  const data = objectMap(calcData, (obj, ck) => {\r\n    const { data: _, ...rest } = teamBundle[ck]!\r\n    return { ...obj, ...rest }\r\n  })\r\n  if (!mainStatAssumptionLevel && !overrideArt && !overrideWeapon)\r\n    database.cacheTeamData(characterKey, data)\r\n  return data\r\n}\r\n\r\nexport function getTeamData(database: ArtCharDatabase, characterKey: CharacterKey | \"\", mainStatAssumptionLevel = 0, overrideArt?: ICachedArtifact[] | Data, overrideWeapon?: ICachedWeapon):\r\n  TeamDataBundle | undefined {\r\n  if (!characterKey) return\r\n  const character = database.chars.get(characterKey)\r\n  if (!character) return\r\n\r\n  const char1DataBundle = getCharDataBundle(database, true, mainStatAssumptionLevel,\r\n    character,\r\n    overrideWeapon ? overrideWeapon : (database.weapons.get(character.equippedWeapon) ?? defaultInitialWeapon()),\r\n    (overrideArt ?? Object.values(character.equippedArtifacts).map(a => database.arts.get(a)).filter(a => a) as ICachedArtifact[])\r\n  )\r\n  if (!char1DataBundle) return\r\n  const teamBundle = { [characterKey]: char1DataBundle }\r\n  const teamData: Dict<CharacterKey, Data[]> = { [characterKey]: char1DataBundle.data }\r\n\r\n  char1DataBundle.character.team.forEach((ck) => {\r\n    if (!ck) return\r\n    const tchar = database.chars.get(ck)\r\n    if (!tchar) return\r\n    const databundle = getCharDataBundle(database, false, 0,\r\n      { ...tchar, conditional: character.teamConditional[ck] ?? {} },\r\n      database.weapons.get(tchar.equippedWeapon) ?? defaultInitialWeapon(),\r\n      Object.values(tchar.equippedArtifacts).map(a => database.arts.get(a)).filter(a => a) as ICachedArtifact[])\r\n    if (!databundle) return\r\n    teamBundle[ck] = databundle\r\n    teamData[ck] = databundle.data\r\n  })\r\n\r\n  return { teamData, teamBundle }\r\n}\r\ntype CharBundle = {\r\n  character: ICachedCharacter,\r\n  weapon: ICachedWeapon,\r\n  characterSheet: CharacterSheet,\r\n  weaponSheet: WeaponSheet,\r\n  data: Data[]\r\n}\r\n\r\nfunction getCharDataBundle(database: ArtCharDatabase, useCustom = false, mainStatAssumptionLevel: number,\r\n  character: ICachedCharacter,\r\n  weapon: ICachedWeapon,\r\n  artifacts: ICachedArtifact[] | Data,\r\n): CharBundle | undefined {\r\n\r\n  const characterSheet = getCharSheet(character.key, database.gender)\r\n  if (!characterSheet) return\r\n  const weaponSheet = getWeaponSheet(weapon.key)\r\n  if (!weaponSheet) return\r\n\r\n  const weaponSheetsDataOfType = WeaponSheet.getAllDataOfType(characterSheet.weaponTypeKey)\r\n\r\n  const weaponSheetsData = useCustom ? (() => {\r\n    // display is included in WeaponSheet.getAllDataOfType\r\n    const { display, ...restWeaponSheetData } = weaponSheet.data\r\n    return mergeData([restWeaponSheetData, weaponSheetsDataOfType])\r\n  })() : weaponSheet.data\r\n\r\n  const sheetData = mergeData([characterSheet.data, weaponSheetsData, allArtifactData])\r\n  const artifactData = Array.isArray(artifacts) ? artifacts.map(a => dataObjForArtifact(a, mainStatAssumptionLevel)) : [artifacts]\r\n  const data = [\r\n    ...artifactData,\r\n    dataObjForCharacter(character, useCustom ? sheetData : undefined),\r\n    dataObjForWeapon(weapon),\r\n    sheetData,\r\n    common, // NEED TO PUT THIS AT THE END\r\n    resonanceData,\r\n  ]\r\n  return { character, weapon, characterSheet, weaponSheet, data }\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { DatabaseContext } from \"../Database/Database\";\r\n\r\nexport default function useWeapon(weaponID: string | undefined = \"\") {\r\n  const { database } = useContext(DatabaseContext)\r\n  const [weapon, setWeapon] = useState(database.weapons.get(weaponID))\r\n  useEffect(() => setWeapon(database.weapons.get(weaponID)), [database, weaponID])\r\n  useEffect(() =>\r\n    weaponID ? database.weapons.follow(weaponID, (k, r, v) => r === \"update\" && setWeapon(v)) : undefined,\r\n    [weaponID, setWeapon, database])\r\n  return weapon\r\n}\r\n","import { createSvgIcon } from \"@mui/material\";\r\n\r\nconst PlumeIcon = createSvgIcon(<path d=\"M 21.160156 0 C 20.578125 0.0429688 20.003906 0.148438 19.445312 0.320312 C 18.546875 0.507812 17.6875 0.855469 16.910156 1.347656 C 16.507812 1.585938 16.5 1.902344 16.375 1.816406 C 16.125 1.710938 15.839844 1.6875 15.574219 1.761719 C 9.6875 6.40625 9.558594 6.671875 6.546875 11.132812 C 6.351562 11.210938 6.058594 10.945312 6.058594 10.945312 C 5.957031 11.878906 5.691406 11.878906 5.160156 12.945312 C 4.5 13.980469 4.269531 15.234375 4.515625 16.4375 C 4.085938 16.359375 3.667969 16.21875 3.277344 16.015625 L 4.078125 16.683594 C 3.554688 16.824219 3.015625 16.867188 2.476562 16.820312 L 3.546875 17.621094 C 3.546875 17.621094 2.875 18.285156 2.609375 18.285156 L 3.5 18.414062 C 2.460938 20.15625 1.59375 21.996094 0.917969 23.910156 C 0.910156 23.933594 0.914062 23.960938 0.929688 23.976562 C 0.945312 23.996094 0.96875 24.003906 0.996094 24 L 2.011719 23.484375 C 2.027344 23.476562 2.039062 23.460938 2.046875 23.441406 C 2.511719 21.625 3.546875 20.003906 4.996094 18.8125 L 5.816406 19.753906 C 5.636719 19.335938 5.546875 18.878906 5.550781 18.421875 L 7.019531 18.6875 C 6.351562 18.019531 6.421875 17.726562 6.421875 17.726562 C 7.328125 17.890625 8.261719 17.871094 9.164062 17.667969 C 10.191406 17.289062 11.171875 16.792969 12.085938 16.1875 C 12.230469 16.117188 11.835938 16.046875 11.972656 15.972656 C 12.109375 15.902344 12.535156 15.8125 12.679688 15.726562 C 14.230469 14.6875 15.695312 13.523438 17.058594 12.253906 C 18.636719 10.925781 20.007812 9.363281 21.113281 7.625 C 21.1875 7.496094 20.496094 7.28125 20.214844 7.226562 C 20.515625 7.261719 21.269531 7.433594 21.335938 7.308594 C 22.089844 6.085938 22.589844 4.722656 22.808594 3.296875 C 22.90625 2.132812 23.972656 -0.136719 21.160156 0 Z M 5.285156 16.417969 C 8.632812 9.210938 18.230469 3.335938 18.230469 3.335938 C 21.265625 0.960938 11.441406 7.515625 5.285156 16.550781 Z M 5.285156 16.417969 \" />, \"Plume\")\r\nexport default PlumeIcon\r\n","import { objectMap } from \"./Util\"\r\ntype Entry = {\r\n  total: number,\r\n  current: number,\r\n}\r\n// A helper function to generate a `current/total` formated string object with categories\r\nexport function catTotal<T extends string | number | symbol>(keys: readonly T[], cb: (ct: Record<T, Entry>) => void) {\r\n  const ct = catTotalObj(keys)\r\n  cb(ct)\r\n  return catTotalToStringObj(ct)\r\n}\r\n\r\nfunction catTotalObj<T extends string | number | symbol>(keys: readonly T[]): Record<T, Entry> {\r\n  return Object.fromEntries(keys.map(k => [k, { total: 0, current: 0 }])) as Record<T, Entry>\r\n}\r\n\r\nfunction catTotalToStringObj<T extends string | number | symbol>(tot: Record<T, Entry>) {\r\n  return objectMap(tot, ({ total, current }) => current === total ? `${total}` : `${current}/${total}`) as Record<T, string>\r\n}\r\n"],"names":["fillRule","d","ArtifactCardPico","artifactObj","art","slotKey","key","_jsx","CardDark","sx","display","flexDirection","height","children","Box","width","pb","position","left","top","transform","opacity","component","src","Assets","mainStatKey","rarity","level","element","allElementsWithPhy","ele","includes","color","ArtifactTooltip","_jsxs","className","artifactAsset","setKey","maxWidth","maxHeight","Typography","fontSize","lineHeight","pointerEvents","SqBadge","p","Artifact","bottom","right","StatIcon","statKey","iconProps","fallback","Skeleton","variant","title","Suspense","ArtifactData","BootstrapTooltip","placement","disableInteractive","_Artifact$mainStatVal","sheet","getArtSheet","substats","slotName","getSlotName","mainStatUnit","KeyMap","mainVariant","SlotIcon","iconInlineProps","cacheValueString","justifyContent","alignItems","StarsDisplay","stars","py","map","stat","value","clamp","rolls","length","name","createSvgIcon","FlowerIcon","Object","assign","PlumeIcon","SandsIcon","GobletIcon","CircletIcon","WeaponFullCard","weaponId","weapon","useWeapon","weaponSheet","getWeaponSheet","UIData","useMemo","computeUIData","data","dataObjForWeapon","flexShrink","alignContent","weaponAsset","ascension","mt","flexGrow","gutterBottom","gap","WeaponSheet","hasRefinement","refinement","WeaponStat","node","get","input","info","icon","nodeVStr","CharacterCard","characterKey","artifactChildren","weaponChildren","characterChildren","onClick","onClickHeader","onClickTeammate","footer","hideStats","isTeammateCard","_useTeamData","_teamData$characterKe","database","useContext","DatabaseContext","teamData","teamDataContext","DataContext","useTeamData","character","useCharacter","gender","useDBMeta","characterSheet","getCharSheet","characterDispatch","useCharacterReducer","target","onClickHandler","useCallback","actionWrapperFunc","CardActionArea","characterContextObj","dataContextObj","favorite","useCharMeta","CardLight","zIndex","IconButton","_","charMeta","set","Favorite","FavoriteBorder","ConditionalWrapper","condition","wrapper","ExistingCharacterCardContent","NewCharacterCardContent","CharacterContext","Header","undefined","HeaderContent","CardContent","Artifacts","Grid","container","columns","spacing","item","xs","WeaponCardPico","equippedWeapon","range","i","CharacterCardPico","team","index","Stats","_Fragment","HeaderContentNew","content","backgroundImage","characterAsset","backgroundPosition","backgroundSize","lg","alignSelf","pr","characterEle","characterLevel","constellation","autoBoost","skillBoost","burstBoost","tAuto","tSkill","tBurst","Chip","label","size","flexWrap","textShadow","whiteSpace","ascensionMaxLevel","colored","elementKey","artifacts","allSlotKeys","k","_data$get$value","arts","id","direction","values","getDisplay","basic","n","NodeFieldDisplay","JSON","stringify","teammateSheet","ElementIcon","verticalAlign","transformOrigin","weaponTypeHandler","handleMultiSelect","allWeaponTypeKeys","WeaponToggle","_ref","totals","onChange","props","_objectWithoutPropertiesLoose","_excluded","theme","useTheme","useMediaQuery","breakpoints","up","SolidToggleButtonGroup","exclusive","wt","_Assets$weaponTypes","ToggleButton","minWidth","ImgIcon","sideMargin","tooltipAddl","WeaponStatPico","WeaponNameTooltip","addlText","weaponType","tr","strKey","Translate","ns","key18","trm","teamSize","sum","allElements","tally","pcNodes","objectKeyValueMap","e","equal","greaterEq","percent","protectiveCanopy","desc","counter","setcounter","useState","useEffect","timer","setInterval","c","clearInterval","canShow","sections","teamBuff","fields","ffNode","ferventFlames","PyroIcon","text","st","unit","swNode","soothingWaters","HydroIcon","condSIPath","condSI","condReadNode","siNode","shatteringIce","CryoIcon","path","header","states","on","highVoltage","ElectroIcon","iwNodeStam","iwNodeMove","iwNodeCD","impetuousWinds","AnemoIcon","condERShieldPath","condERShield","condERHitPath","condERHit","erNodeshield_","erNodeDMG_","erNodeRes_","enduringRock","GeoIcon","stg","condSG2elePath","condSG2ele","condSG3elePath","condSG3ele","sgBase_eleMas","isTeamBuff","sg2ele_eleMas","sg3ele_eleMas","resonanceSheets","DendroIcon","resonanceData","inferInfoMut","premod","atk_","hp_","staminaDec_","moveSPD_","cdRed_","shield_","all_dmg_","geo_enemyRes_","eleMas","infoMut","pivot","total","critRate_","setCharMetaState","follow","r","dbMeta","useCharSelectionCallback","_useMatch","navigate","useNavigate","params","tab","useMatch","end","chars","navTab","getWithInitWeapon","updateCharacter","v","action","type","enemyOverride","bonusStats","deepClone","teamMateKey","conditional","teamConditional","team_","charKey","mainStatAssumptionLevel","overrideArt","overrideWeapon","dbDirty","setDbDirty","useForceUpdate","dbDirtyDeferred","useDeferredValue","_getTeamData","cache","teamBundle","getTeamData","calcData","uiDataForTeam","objectMap","obj","ck","rest","cacheTeamData","getTeamDataCalc","_database$weapons$get","char1DataBundle","getCharDataBundle","weapons","defaultInitialWeapon","equippedArtifacts","a","filter","forEach","_character$teamCondit","_database$weapons$get2","tchar","databundle","useCustom","weaponSheetsDataOfType","weaponTypeKey","weaponSheetsData","_weaponSheet$data","restWeaponSheetData","_excluded2","mergeData","sheetData","allArtifactData","Array","isArray","dataObjForArtifact","dataObjForCharacter","common","weaponID","setWeapon","catTotal","keys","cb","ct","fromEntries","current","catTotalObj","tot"],"sourceRoot":""}